"use strict";(self.webpackChunkCoreLab=self.webpackChunkCoreLab||[]).push([[291],{3291:(ea,at,p)=>{p.r(at),p.d(at,{MasterModule:()=>ta});var h=p(177),O=p(8498),S=p(152),s=p(5351),t=p(7705),B=p(1997),g=p(8834);let A=(()=>{class a{constructor(e,n){this.dialogRef=e,this.data=n}onClose(e){this.dialogRef.close(e)}static{this.\u0275fac=function(n){return new(n||a)(t.rXU(s.CP),t.rXU(s.Vh))}}static{this.\u0275cmp=t.VBU({type:a,selectors:[["CoreLab-delete-dailog"]],decls:12,vars:4,consts:[["mat-dialog-title",""],["align","end"],["mat-stroked-button","",3,"click"],["mat-stroked-button","","color","primary",3,"click"]],template:function(n,i){1&n&&(t.j41(0,"h2",0),t.EFF(1),t.k0s(),t.nrm(2,"mat-divider"),t.j41(3,"mat-dialog-content")(4,"p"),t.EFF(5),t.k0s()(),t.nrm(6,"mat-divider"),t.j41(7,"mat-dialog-actions",1)(8,"button",2),t.bIt("click",function(){return i.onClose(!1)}),t.EFF(9),t.k0s(),t.j41(10,"button",3),t.bIt("click",function(){return i.onClose(!0)}),t.EFF(11),t.k0s()()),2&n&&(t.R7$(1),t.JRh(i.data.title),t.R7$(4),t.JRh(i.data.body),t.R7$(4),t.JRh(i.data.cancelText||"Cancel"),t.R7$(2),t.JRh(i.data.confirmText))},dependencies:[B.q,g.$z,s.BI,s.Yi,s.E7]})}}return a})();var l=p(9417),C=p(5312),F=p(5416),k=p(6549),x=p(9631),m=p(6467),y=p(9213),ot=p(4823),f=p(6600),j=p(2798),_=p(2920);const wt=["thumbnailInput"],Mt=["fileInput"];function kt(a,c){1&a&&(t.j41(0,"mat-error"),t.EFF(1," Caption cannot exceed 200 characters "),t.k0s())}function xt(a,c){if(1&a){const e=t.RV6();t.j41(0,"div",21),t.bIt("click",function(){t.eBV(e),t.XpG();const i=t.sdS(24);return t.Njj(i.click())}),t.j41(1,"mat-icon",22),t.EFF(2,"cloud_upload"),t.k0s(),t.j41(3,"p"),t.EFF(4,"Click to upload thumbnail"),t.k0s(),t.j41(5,"p",23),t.EFF(6,"Max size: 2MB \u2022 Formats: JPG, PNG, WebP"),t.k0s()()}}function Ft(a,c){if(1&a){const e=t.RV6();t.j41(0,"div",24),t.nrm(1,"img",25),t.j41(2,"div",26)(3,"button",27),t.bIt("click",function(){t.eBV(e),t.XpG();const i=t.sdS(24);return t.Njj(i.click())}),t.j41(4,"mat-icon"),t.EFF(5,"edit"),t.k0s()(),t.j41(6,"button",28),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.removeThumbnail())}),t.j41(7,"mat-icon"),t.EFF(8,"delete"),t.k0s()()()()}if(2&a){const e=t.XpG();let n;t.R7$(1),t.Y8G("src",e.thumbnailPreview||(null==(n=e.form.get("thumbnail"))?null:n.value),t.B4B)}}function It(a,c){1&a&&(t.j41(0,"mat-error"),t.EFF(1," Thumbnail size must be less than 2MB "),t.k0s())}function Pt(a,c){1&a&&(t.j41(0,"mat-error"),t.EFF(1," Only JPG, PNG, and WebP formats are allowed for thumbnails "),t.k0s())}function Et(a,c){if(1&a){const e=t.RV6();t.j41(0,"div",21),t.bIt("click",function(){t.eBV(e),t.XpG();const i=t.sdS(34);return t.Njj(i.click())}),t.j41(1,"mat-icon",22),t.EFF(2,"cloud_upload"),t.k0s(),t.j41(3,"p"),t.EFF(4,"Click to upload main file"),t.k0s(),t.j41(5,"p",23),t.EFF(6,"Max size: 10MB \u2022 Formats: JPG, PNG, WebP, PDF, ZIP"),t.k0s()()}}function Tt(a,c){if(1&a&&(t.j41(0,"div",33),t.nrm(1,"img",34),t.k0s()),2&a){const e=t.XpG(2);let n;t.R7$(1),t.Y8G("src",e.filePreview||(null==(n=e.form.get("file"))?null:n.value),t.B4B)}}function Gt(a,c){if(1&a&&(t.j41(0,"div",35)(1,"mat-icon",36),t.EFF(2,"description"),t.k0s(),t.j41(3,"p",37),t.EFF(4),t.k0s()()),2&a){const e=t.XpG(2);let n;t.R7$(4),t.JRh(e.getFileName(null==(n=e.form.get("file"))?null:n.value))}}function Ot(a,c){if(1&a){const e=t.RV6();t.j41(0,"div",24),t.DNE(1,Tt,2,1,"div",29),t.DNE(2,Gt,5,1,"div",30),t.j41(3,"div",26)(4,"button",31),t.bIt("click",function(){t.eBV(e),t.XpG();const i=t.sdS(34);return t.Njj(i.click())}),t.j41(5,"mat-icon"),t.EFF(6,"edit"),t.k0s()(),t.j41(7,"button",32),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.removeFile())}),t.j41(8,"mat-icon"),t.EFF(9,"delete"),t.k0s()()()()}if(2&a){const e=t.XpG();let n,i;t.R7$(1),t.Y8G("ngIf",e.isImageFile(null==(n=e.form.get("file"))?null:n.value)),t.R7$(1),t.Y8G("ngIf",!e.isImageFile(null==(i=e.form.get("file"))?null:i.value))}}function jt(a,c){1&a&&(t.j41(0,"mat-error"),t.EFF(1," File size must be less than 10MB "),t.k0s())}function Rt(a,c){1&a&&(t.j41(0,"mat-error"),t.EFF(1," Only JPG, PNG, WebP, PDF, and ZIP formats are allowed "),t.k0s())}let rt=(()=>{class a{constructor(e,n,i,o,r){this.fb=e,this.dialogRef=n,this.data=i,this._snackBar=o,this.masterService=r,this.thumbnailPreview=null,this.filePreview=null,this.form=this.fb.group({caption:["",[l.k0.maxLength(200)]],thumbnail:[null],category:[null],file:[null]})}ngOnInit(){"UPDATE"===this.data?.action&&this.data.payload&&(this.form.patchValue({caption:this.data.payload?.imageMetadata?.caption||"",category:this.data.payload?.imageMetadata?.category||""}),this.data.payload.thumbnail&&this.form.get("thumbnail")?.setValue(C.c.server+this.data.payload.thumbnail),this.data.payload.url&&this.form.get("file")?.setValue(C.c.server+this.data.payload.url))}onThumbnailSelected(e){const n=e.target.files[0];if(!n)return;if(!["image/jpeg","image/png","image/webp"].includes(n.type))return void this.form.get("thumbnail")?.setErrors({fileType:!0});if(n.size>2097152)return void this.form.get("thumbnail")?.setErrors({fileSize:!0});this.form.get("thumbnail")?.setErrors(null);const o=new FileReader;o.onload=()=>{this.thumbnailPreview=o.result,this.form.get("thumbnail")?.setValue(n)},o.readAsDataURL(n)}onFileSelected(e){const n=e.target.files[0];if(n)if(["image/jpeg","image/png","image/webp","application/pdf","application/zip"].includes(n.type))if(n.size>10485760)this.form.get("file")?.setErrors({fileSize:!0});else if(this.form.get("file")?.setErrors(null),n.type.startsWith("image/")){const o=new FileReader;o.onload=()=>{this.filePreview=o.result,this.form.get("file")?.setValue(n)},o.readAsDataURL(n)}else this.filePreview=null,this.form.get("file")?.setValue(n);else this.form.get("file")?.setErrors({fileType:!0})}isImageFile(e){return e instanceof File?e.type.startsWith("image/"):"string"==typeof e&&/\.(jpg|jpeg|png|webp)$/i.test(e)}getFileName(e){return e instanceof File?e.name:"string"==typeof e&&e.split("/").pop()||"File"}removeThumbnail(){this.thumbnailPreview=null,this.form.get("thumbnail")?.setValue(null),this.form.get("thumbnail")?.setErrors(null)}removeFile(){this.filePreview=null,this.form.get("file")?.setValue(null),this.form.get("file")?.setErrors(null)}onCancel(){this.dialogRef.close()}onSubmit(){if(this.form.invalid)return void this.form.markAllAsTouched();const e=new FormData;e.append("caption",this.form.value.caption||""),e.append("category",this.form.value.category||""),this.form.value.thumbnail instanceof File?e.append("thumbnail",this.form.value.thumbnail):this.form.value.thumbnail&&e.append("thumbnailUrl",this.form.value.thumbnail),this.form.value.file instanceof File?e.append("file",this.form.value.file):this.form.value.file&&e.append("fileUrl",this.form.value.file),"UPDATE"===this.data.action?(e.append("id",this.data.payload.id),this.updateGallery(e)):this.createGallery(e)}createGallery(e){this.masterService.uploadImage(e).subscribe({next:n=>{this._snackBar.open("Gallery item created successfully","Close",{duration:3e3,panelClass:["style-success"]}),this.dialogRef.close(n)},error:n=>{this._snackBar.open(n.error.message||"Creation failed","Close",{duration:5e3,panelClass:["style-error"]})}})}updateGallery(e){this.masterService.updateImage(this.data.payload.id,e).subscribe({next:n=>{this._snackBar.open("Gallery item updated successfully","Close",{duration:3e3,panelClass:["style-success"]}),this.dialogRef.close(n)},error:n=>{this._snackBar.open(n?.error?.message,"Close",{duration:5e3,panelClass:["style-error"]}),this.dialogRef.close(this.data)}})}static{this.\u0275fac=function(n){return new(n||a)(t.rXU(l.ok),t.rXU(s.CP),t.rXU(s.Vh),t.rXU(F.UG),t.rXU(k.m))}}static{this.\u0275cmp=t.VBU({type:a,selectors:[["CoreLab-manage-gallery-dialog"]],viewQuery:function(n,i){if(1&n&&(t.GBs(wt,5),t.GBs(Mt,5)),2&n){let o;t.mGM(o=t.lsd())&&(i.thumbnailInput=o.first),t.mGM(o=t.lsd())&&(i.fileInput=o.first)}},decls:43,vars:13,consts:[["mat-dialog-title","",1,"dialog-title"],["fxLayout","column","mat-dialog-content","",1,"dialog-body",3,"formGroup","ngSubmit"],["appearance","outline",1,"full-width"],["formControlName","category"],["value","Timeline"],["value","Movie"],["appearance","outline","fxFlex","1 1 100%"],["matInput","","formControlName","caption","placeholder","Enter image caption","rows","3"],[4,"ngIf"],["fxFlex","1 1 100%","fxLayout","column"],[1,"section-label"],["fxLayout","column",1,"file-upload-container"],["class","upload-area",3,"click",4,"ngIf"],["class","preview-area",4,"ngIf"],["type","file","accept","image/jpeg,image/png,image/webp",2,"display","none",3,"change"],["thumbnailInput",""],["type","file","accept","image/jpeg,image/png,image/webp,application/pdf,application/zip",2,"display","none",3,"change"],["fileInput",""],["align","end",1,"dialog-actions"],["mat-stroked-button","","color","basic",3,"click"],["mat-flat-button","","color","primary","type","submit",3,"disabled","click"],[1,"upload-area",3,"click"],[1,"upload-icon"],[1,"file-info"],[1,"preview-area"],["alt","Thumbnail preview",1,"thumbnail-preview",3,"src"],[1,"preview-actions"],["mat-icon-button","","color","primary","matTooltip","Change thumbnail",3,"click"],["mat-icon-button","","color","warn","matTooltip","Remove thumbnail",3,"click"],["class","image-preview-container",4,"ngIf"],["class","file-info-preview",4,"ngIf"],["mat-icon-button","","color","primary","matTooltip","Change file",3,"click"],["mat-icon-button","","color","warn","matTooltip","Remove file",3,"click"],[1,"image-preview-container"],["alt","File preview",1,"file-preview",3,"src"],[1,"file-info-preview"],[1,"file-icon"],[1,"file-name"]],template:function(n,i){if(1&n&&(t.j41(0,"h2",0),t.EFF(1),t.k0s(),t.nrm(2,"mat-divider"),t.j41(3,"form",1),t.bIt("ngSubmit",function(){return i.onSubmit()}),t.j41(4,"mat-form-field",2)(5,"mat-label"),t.EFF(6,"Category"),t.k0s(),t.j41(7,"mat-select",3)(8,"mat-option",4),t.EFF(9,"Timeline"),t.k0s(),t.j41(10,"mat-option",5),t.EFF(11,"Movie"),t.k0s()()(),t.j41(12,"mat-form-field",6)(13,"mat-label"),t.EFF(14,"Caption"),t.k0s(),t.nrm(15,"textarea",7),t.DNE(16,kt,2,0,"mat-error",8),t.k0s(),t.j41(17,"div",9)(18,"label",10),t.EFF(19,"Thumbnail"),t.k0s(),t.j41(20,"div",11),t.DNE(21,xt,7,0,"div",12),t.DNE(22,Ft,9,1,"div",13),t.j41(23,"input",14,15),t.bIt("change",function(r){return i.onThumbnailSelected(r)}),t.k0s(),t.DNE(25,It,2,0,"mat-error",8),t.DNE(26,Pt,2,0,"mat-error",8),t.k0s()(),t.j41(27,"div",9)(28,"label",10),t.EFF(29,"Main File"),t.k0s(),t.j41(30,"div",11),t.DNE(31,Et,7,0,"div",12),t.DNE(32,Ot,10,2,"div",13),t.j41(33,"input",16,17),t.bIt("change",function(r){return i.onFileSelected(r)}),t.k0s(),t.DNE(35,jt,2,0,"mat-error",8),t.DNE(36,Rt,2,0,"mat-error",8),t.k0s()()(),t.nrm(37,"mat-divider"),t.j41(38,"mat-dialog-actions",18)(39,"button",19),t.bIt("click",function(){return i.onCancel()}),t.EFF(40,"Cancel"),t.k0s(),t.j41(41,"button",20),t.bIt("click",function(){return i.onSubmit()}),t.EFF(42),t.k0s()()),2&n){let o,r,d,u,b,P,T,G,X;t.R7$(1),t.SpI(" ",i.data.title,"\n"),t.R7$(2),t.Y8G("formGroup",i.form),t.R7$(13),t.Y8G("ngIf",null==(o=i.form.get("caption"))?null:o.hasError("maxlength")),t.R7$(5),t.Y8G("ngIf",!(i.thumbnailPreview||null!=(r=i.form.get("thumbnail"))&&r.value)),t.R7$(1),t.Y8G("ngIf",i.thumbnailPreview||(null==(d=i.form.get("thumbnail"))?null:d.value)),t.R7$(3),t.Y8G("ngIf",null==(u=i.form.get("thumbnail"))?null:u.hasError("fileSize")),t.R7$(1),t.Y8G("ngIf",null==(b=i.form.get("thumbnail"))?null:b.hasError("fileType")),t.R7$(5),t.Y8G("ngIf",!(i.filePreview||null!=(P=i.form.get("file"))&&P.value)),t.R7$(1),t.Y8G("ngIf",i.filePreview||(null==(T=i.form.get("file"))?null:T.value)),t.R7$(3),t.Y8G("ngIf",null==(G=i.form.get("file"))?null:G.hasError("fileSize")),t.R7$(1),t.Y8G("ngIf",null==(X=i.form.get("file"))?null:X.hasError("fileType")),t.R7$(5),t.Y8G("disabled",i.form.invalid),t.R7$(1),t.SpI(" ","UPDATE"===i.data.action?"Save Changes":"Create"," ")}},dependencies:[h.bT,x.fg,m.rl,m.nJ,m.TL,y.An,B.q,g.$z,g.iY,s.BI,s.Yi,s.E7,ot.oV,f.wT,j.VO,_.DJ,_.UI,l.qT,l.me,l.BC,l.cb,l.j4,l.JD],styles:[".dialog-title[_ngcontent-%COMP%]{font-weight:500;margin:0}.dialog-body[_ngcontent-%COMP%]{padding:20px;min-height:400px}.section-label[_ngcontent-%COMP%]{font-size:14px;margin-bottom:8px;color:#0009;font-weight:500}.file-upload-container[_ngcontent-%COMP%]{margin-bottom:24px}.upload-area[_ngcontent-%COMP%]{border:2px dashed #ccc;border-radius:4px;padding:20px;text-align:center;transition:all .3s;margin-bottom:16px}.upload-area[_ngcontent-%COMP%]:hover{border-color:#3f51b5;background-color:#3f51b50a;cursor:pointer}.upload-area[_ngcontent-%COMP%]   .upload-icon[_ngcontent-%COMP%]{font-size:48px;width:48px;height:48px;color:#ccc;margin-bottom:8px}.upload-area[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#0009}.upload-area[_ngcontent-%COMP%]   .file-info[_ngcontent-%COMP%]{font-size:12px;margin-top:4px}.preview-area[_ngcontent-%COMP%]{position:relative;margin-bottom:16px}.preview-area[_ngcontent-%COMP%]   .thumbnail-preview[_ngcontent-%COMP%], .preview-area[_ngcontent-%COMP%]   .file-preview[_ngcontent-%COMP%]{width:100%;max-height:200px;object-fit:contain;border-radius:4px;border:1px solid #eee}.preview-area[_ngcontent-%COMP%]   .file-info-preview[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:20px;border:1px solid #eee;border-radius:4px}.preview-area[_ngcontent-%COMP%]   .file-info-preview[_ngcontent-%COMP%]   .file-icon[_ngcontent-%COMP%]{font-size:48px;width:48px;height:48px;color:#757575;margin-bottom:8px}.preview-area[_ngcontent-%COMP%]   .file-info-preview[_ngcontent-%COMP%]   .file-name[_ngcontent-%COMP%]{margin:0;font-size:14px;color:#000000de;word-break:break-all;text-align:center}.preview-area[_ngcontent-%COMP%]   .preview-actions[_ngcontent-%COMP%]{position:absolute;bottom:8px;right:8px;background:rgba(255,255,255,.8);border-radius:4px;padding:4px}.dialog-actions[_ngcontent-%COMP%]{padding:16px;margin:0}"]})}}return a})();var R=p(5596),ct=p(9183);function Dt(a,c){1&a&&t.nrm(0,"mat-progress-spinner",10)}function Vt(a,c){if(1&a){const e=t.RV6();t.j41(0,"div",7),t.DNE(1,Dt,1,0,"mat-progress-spinner",8),t.j41(2,"img",9),t.bIt("load",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.imageLoaded=!0)})("error",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.imageLoaded=!0)}),t.k0s()()}if(2&a){const e=t.XpG();t.R7$(1),t.Y8G("ngIf",!e.imageLoaded),t.R7$(1),t.AVh("hidden",!e.imageLoaded),t.Y8G("src",e.data.fileUrl,t.B4B)}}function St(a,c){1&a&&t.nrm(0,"mat-progress-spinner",10)}function Bt(a,c){if(1&a){const e=t.RV6();t.j41(0,"div",7),t.DNE(1,St,1,0,"mat-progress-spinner",8),t.j41(2,"video",11),t.bIt("loadeddata",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.videoLoaded=!0)})("error",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.videoLoaded=!0)}),t.k0s()()}if(2&a){const e=t.XpG();t.R7$(1),t.Y8G("ngIf",!e.videoLoaded),t.R7$(1),t.AVh("hidden",!e.videoLoaded),t.Y8G("src",e.data.fileUrl,t.B4B)}}function At(a,c){1&a&&t.nrm(0,"mat-progress-spinner",10)}function $t(a,c){if(1&a){const e=t.RV6();t.j41(0,"div",7),t.DNE(1,At,1,0,"mat-progress-spinner",8),t.j41(2,"div",12)(3,"mat-icon",13),t.EFF(4,"audiotrack"),t.k0s(),t.j41(5,"audio",14),t.bIt("loadedmetadata",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.audioLoaded=!0)})("error",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.audioLoaded=!0)}),t.k0s()()()}if(2&a){const e=t.XpG();t.R7$(1),t.Y8G("ngIf",!e.audioLoaded),t.R7$(1),t.AVh("hidden",!e.audioLoaded),t.R7$(3),t.Y8G("src",e.data.fileUrl,t.B4B)}}let Nt=(()=>{class a{constructor(e,n){this.dialogRef=e,this.data=n,this.imageLoaded=!1,this.videoLoaded=!1,this.audioLoaded=!1}close(){this.dialogRef.close()}static{this.\u0275fac=function(n){return new(n||a)(t.rXU(s.CP),t.rXU(s.Vh))}}static{this.\u0275cmp=t.VBU({type:a,selectors:[["CoreLab-view-gallery-dailog"]],decls:11,vars:4,consts:[[1,"dialog-container"],[1,"media-card","mat-elevation-z6"],[1,"media-title"],[1,"media-wrapper"],["class","media-loader",4,"ngIf"],["align","end",1,"dialog-actions"],["mat-stroked-button","","color","primary",3,"click"],[1,"media-loader"],["mode","indeterminate","diameter","40","class","spinner",4,"ngIf"],["alt","Preview",1,"media-image",3,"src","load","error"],["mode","indeterminate","diameter","40",1,"spinner"],["controls","",1,"media-video",3,"src","loadeddata","error"],[1,"audio-wrapper"],[1,"audio-icon"],["controls","",1,"media-audio",3,"src","loadedmetadata","error"]],template:function(n,i){1&n&&(t.j41(0,"mat-dialog-content",0)(1,"mat-card",1)(2,"h2",2),t.EFF(3),t.k0s(),t.j41(4,"div",3),t.DNE(5,Vt,3,4,"div",4),t.DNE(6,Bt,3,4,"div",4),t.DNE(7,$t,6,4,"div",4),t.k0s()()(),t.j41(8,"mat-dialog-actions",5)(9,"button",6),t.bIt("click",function(){return i.close()}),t.EFF(10,"Close"),t.k0s()()),2&n&&(t.R7$(3),t.JRh(i.data.title),t.R7$(2),t.Y8G("ngIf","image"===i.data.fileType),t.R7$(1),t.Y8G("ngIf","video"===i.data.fileType),t.R7$(1),t.Y8G("ngIf","audio"===i.data.fileType))},dependencies:[h.bT,y.An,g.$z,s.Yi,s.E7,R.RN,ct.LG],styles:[".dialog-container[_ngcontent-%COMP%]{padding:0!important;margin:0}.media-card[_ngcontent-%COMP%]{width:100%;height:100%;border-radius:0;box-shadow:none}.media-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;background:#000}.media-wrapper[_ngcontent-%COMP%]   .media-image[_ngcontent-%COMP%], .media-wrapper[_ngcontent-%COMP%]   .media-video[_ngcontent-%COMP%]{width:100%;max-height:60vh;object-fit:cover}.media-info[_ngcontent-%COMP%]{padding:20px}.media-info[_ngcontent-%COMP%]   .media-title[_ngcontent-%COMP%]{font-size:22px;font-weight:600;margin-bottom:8px;color:#1f2937}.media-info[_ngcontent-%COMP%]   .media-caption[_ngcontent-%COMP%]{font-size:15px;line-height:1.5;color:#6b7280;margin-bottom:12px}.media-info[_ngcontent-%COMP%]   mat-chip[_ngcontent-%COMP%]{font-size:13px;border-radius:16px;font-weight:500}.dialog-actions[_ngcontent-%COMP%]{padding:12px 24px;border-top:1px solid #e5e7eb}.media-wrapper[_ngcontent-%COMP%]{position:relative;display:flex;justify-content:center;align-items:center;background:#000;min-height:200px}.media-wrapper[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{position:absolute;z-index:2;color:#3f51b5}.media-wrapper[_ngcontent-%COMP%]   .media-image[_ngcontent-%COMP%], .media-wrapper[_ngcontent-%COMP%]   .media-video[_ngcontent-%COMP%]{width:100%;max-height:60vh;object-fit:cover;border-radius:4px}.media-wrapper[_ngcontent-%COMP%]   .audio-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;padding:16px;background:#fafafa;width:100%}.media-wrapper[_ngcontent-%COMP%]   .audio-wrapper[_ngcontent-%COMP%]   .audio-icon[_ngcontent-%COMP%]{margin-right:12px;color:#3f51b5}.media-wrapper[_ngcontent-%COMP%]   .audio-wrapper[_ngcontent-%COMP%]   .media-audio[_ngcontent-%COMP%]{flex:1}.media-wrapper[_ngcontent-%COMP%]   .hidden[_ngcontent-%COMP%]{display:none}"]})}}return a})();var v=p(9115);let $=(()=>{class a{constructor(){this.mode="simple"}get isCard(){return"card"===this.mode}get isSimple(){return"simple"===this.mode}static{this.\u0275fac=function(n){return new(n||a)}}static{this.\u0275dir=t.FsC({type:a,selectors:[["","furyPageLayout",""],["fury-page-layout"]],hostAttrs:[1,"fury-page-layout"],hostVars:4,hostBindings:function(n,i){2&n&&t.AVh("fury-page-layout-card",i.isCard)("fury-page-layout-simple",i.isSimple)},inputs:{mode:"mode"}})}}return a})(),N=(()=>{class a{constructor(){}static{this.\u0275fac=function(n){return new(n||a)}}static{this.\u0275dir=t.FsC({type:a,selectors:[["","furyPageLayoutContent",""],["fury-page-layout-content"]],hostAttrs:[1,"fury-page-layout-content"]})}}return a})();var U=p(5691),H=p(6695),I=p(9159);function Ut(a,c){if(1&a&&(t.j41(0,"th",11),t.EFF(1),t.k0s()),2&a){const e=t.XpG(2).$implicit;t.R7$(1),t.JRh(e.name)}}function zt(a,c){1&a&&t.eu8(0)}const Xt=function(a,c){return{$implicit:a,index:c}};function Yt(a,c){if(1&a&&(t.qex(0),t.DNE(1,zt,1,0,"ng-container",15),t.bVm()),2&a){const e=t.XpG(),n=e.$implicit,i=e.index,o=t.XpG(2).$implicit;t.R7$(1),t.Y8G("ngTemplateOutlet",o.cellTemplate)("ngTemplateOutletContext",t.l_i(2,Xt,n,i))}}function Lt(a,c){if(1&a&&t.EFF(0),2&a){const e=t.XpG().$implicit,n=t.XpG(2).$implicit,i=t.XpG(2);t.JRh(i.getNestedValue(e,n))}}function Qt(a,c){if(1&a&&(t.j41(0,"td",12),t.DNE(1,Yt,2,5,"ng-container",13),t.DNE(2,Lt,1,1,"ng-template",null,14,t.C5r),t.k0s()),2&a){const e=t.sdS(3),n=t.XpG(2).$implicit;t.R7$(1),t.Y8G("ngIf",n.cellTemplate)("ngIfElse",e)}}function Jt(a,c){if(1&a&&(t.qex(0)(1,8),t.DNE(2,Ut,2,1,"th",9),t.DNE(3,Qt,4,2,"td",10),t.bVm()()),2&a){const e=t.XpG().$implicit;t.R7$(1),t.Y8G("matColumnDef",e.property)}}function qt(a,c){if(1&a&&(t.qex(0),t.DNE(1,Jt,4,1,"ng-container",7),t.bVm()),2&a){const e=c.$implicit;t.R7$(1),t.Y8G("ngIf",e.visible)}}function Ht(a,c){1&a&&t.nrm(0,"tr",16)}function Kt(a,c){1&a&&t.nrm(0,"tr",17)}function Wt(a,c){if(1&a&&(t.j41(0,"table",3),t.DNE(1,qt,2,1,"ng-container",4),t.DNE(2,Ht,1,0,"tr",5),t.DNE(3,Kt,1,0,"tr",6),t.k0s()),2&a){const e=t.XpG();t.Y8G("dataSource",e.data),t.R7$(1),t.Y8G("ngForOf",e.columns),t.R7$(1),t.Y8G("matHeaderRowDef",e.displayedColumns),t.R7$(1),t.Y8G("matRowDefColumns",e.displayedColumns)}}function Zt(a,c){if(1&a&&(t.j41(0,"div",18),t.EFF(1),t.k0s()),2&a){const e=t.XpG();t.R7$(1),t.SpI(" ",e.noDataLabel," ")}}function te(a,c){if(1&a){const e=t.RV6();t.j41(0,"mat-paginator",19),t.bIt("page",function(i){t.eBV(e);const o=t.XpG();return t.Njj(o.onPageChange(i))}),t.k0s()}if(2&a){const e=t.XpG();t.Y8G("length",e.totalRecords)("pageSize",e.pageSize)("pageSizeOptions",e.pageSizeOptions)}}let z=(()=>{class a{constructor(){this.columns=[],this.noDataLabel="No data found",this.data=[],this.usePaginator=!0,this.pageSize=10,this.pageSizeOptions=[10,25,50],this.totalRecords=0,this.pageChange=new t.bkB}get displayedColumns(){return this.columns.filter(e=>e.visible).map(e=>e.property)}getNestedValue(e,n){try{return n.valuePath&&"string"==typeof n.valuePath?n.valuePath.split(".").reduce((i,o)=>i?.[o],e)??"":e?.[n.property]??""}catch{return""}}onPageChange(e){this.pageChange.emit({pageIndex:e.pageIndex,pageSize:e.pageSize})}static{this.\u0275fac=function(n){return new(n||a)}}static{this.\u0275cmp=t.VBU({type:a,selectors:[["shared-data-table"]],viewQuery:function(n,i){if(1&n&&t.GBs(H.iy,5),2&n){let o;t.mGM(o=t.lsd())&&(i.paginator=o.first)}},inputs:{columns:"columns",noDataLabel:"noDataLabel",data:"data",usePaginator:"usePaginator",pageSize:"pageSize",pageSizeOptions:"pageSizeOptions",totalRecords:"totalRecords"},outputs:{pageChange:"pageChange"},decls:6,vars:3,consts:[["mat-table","",3,"dataSource",4,"ngIf","ngIfElse"],["noDataTemplate",""],[3,"length","pageSize","pageSizeOptions","page",4,"ngIf"],["mat-table","",3,"dataSource"],[4,"ngFor","ngForOf"],["mat-header-row","","style","background-color: rgb(245, 245, 245); border-top: 1px solid #ddd;",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[4,"ngIf"],[3,"matColumnDef"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-cell",""],["mat-cell",""],[4,"ngIf","ngIfElse"],["defaultCell",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["mat-header-row","",2,"background-color","rgb(245, 245, 245)","border-top","1px solid #ddd"],["mat-row",""],[1,"no-data-label"],[3,"length","pageSize","pageSizeOptions","page"]],template:function(n,i){if(1&n&&(t.j41(0,"div"),t.DNE(1,Wt,4,4,"table",0),t.DNE(2,Zt,2,1,"ng-template",null,1,t.C5r),t.nrm(4,"mat-divider"),t.DNE(5,te,1,3,"mat-paginator",2),t.k0s()),2&n){const o=t.sdS(3);t.R7$(1),t.Y8G("ngIf",(null==i.data?null:i.data.length)>0)("ngIfElse",o),t.R7$(4),t.Y8G("ngIf",i.usePaginator)}},dependencies:[h.Sq,h.bT,h.T3,B.q,I.Zl,I.tL,I.ji,I.cC,I.YV,I.iL,I.KS,I.$R,I.YZ,I.NB,H.iy],styles:[".no-data-label[_ngcontent-%COMP%]{text-align:center;padding:16px;font-size:14px;color:#888}"]})}}return a})();const ee=["actionsTemplate"],ie=["firstPosTemplate"],ne=["imageTemplate"];function ae(a,c){if(1&a&&t.EFF(0),2&a){const e=c.index,n=t.XpG();t.SpI(" ",e+1+n.page*n.size,". ")}}function oe(a,c){if(1&a){const e=t.RV6();t.qex(0),t.j41(1,"button",15),t.bIt("click",function(i){return i.stopPropagation()}),t.j41(2,"mat-icon"),t.EFF(3,"more_vert"),t.k0s()(),t.j41(4,"mat-menu",16,17)(6,"button",18),t.bIt("click",function(){const o=t.eBV(e).$implicit,r=t.XpG();return t.Njj(r.openPreview(o))}),t.j41(7,"mat-icon"),t.EFF(8,"remove_red_eye"),t.k0s(),t.EFF(9," View "),t.k0s(),t.j41(10,"button",18),t.bIt("click",function(){const o=t.eBV(e).$implicit,r=t.XpG();return t.Njj(r.openUpdateDialog(o))}),t.j41(11,"mat-icon"),t.EFF(12,"edit"),t.k0s(),t.EFF(13," Edit "),t.k0s(),t.j41(14,"button",18),t.bIt("click",function(){const o=t.eBV(e).$implicit,r=t.XpG();return t.Njj(r.delete(o))}),t.j41(15,"span",19)(16,"mat-icon"),t.EFF(17,"delete"),t.k0s(),t.j41(18,"span"),t.EFF(19,"Delete"),t.k0s()()()(),t.bVm()}if(2&a){const e=t.sdS(5);t.R7$(1),t.Y8G("matMenuTriggerFor",e)}}function re(a,c){if(1&a&&t.nrm(0,"img",20),2&a){const e=c.$implicit,n=t.XpG();t.Y8G("src",n.baseUrl+e.thumbnail,t.B4B)}}let ce=(()=>{class a{constructor(e,n,i,o,r,d){this.dialog=e,this.router=n,this.fb=i,this.masterService=o,this._snackBar=r,this.cdRef=d,this.baseUrl=C.c.server,this.columns=[],this.displayedColumns=[],this.page=0,this.size=10,this.pageSizeList=[10,25,50,100,250],this.mediaList=[]}ngOnInit(){this.columns=[{name:"#",property:"pos",visible:!0,alwaysShow:!0},{name:"Image",property:"image",visible:!0,alwaysShow:!0},{name:"Caption",property:"caption",visible:!0,alwaysShow:!0,valuePath:"imageMetadata.caption"},{name:"Category",property:"category",visible:!0,alwaysShow:!0,valuePath:"imageMetadata.category"},{name:"Actions",property:"actions",visible:!0,alwaysShow:!0}],this.displayedColumns=this.columns,this.form=this.fb.group({key:[""],category:[""]}),this.form.valueChanges.pipe((0,S.B)(400)).subscribe(e=>{this.getAllMedia()}),this.getAllMedia()}onPageChange(e){this.page=e.pageIndex,this.size=e.pageSize,this.getAllMedia()}getAllMedia(){let e={page:this.page,size:this.size,sort:"id,asc",fileTypes:"IMAGE"};null!=this.form.get("key")?.value&&""!=this.form.get("key")?.value&&(e.key=this.form.get("key")?.value),null!=this.form.get("category")?.value&&""!=this.form.get("category")?.value&&(e.categories=this.form.get("category")?.value),this.masterService.getAllMedia(e).subscribe({next:n=>{this.recordCount=n.totalElements,this.mediaList=n.content},error:n=>{console.log(n)}})}ngOnChanges(){this.updateDisplayedColumns()}ngAfterViewInit(){setTimeout(()=>{const e={actions:this.actionsTemplate,pos:this.firstPosTemplate,image:this.imageTemplate};this.columns.forEach(n=>{const i=e[n.property];i&&(n.cellTemplate=i)}),this.cdRef.detectChanges()})}clear(){this.form.reset(),this.form.get("status")?.setValue("Active")}updateDisplayedColumns(){this.displayedColumns=this.columns.filter(e=>e.visible)}toggleColumnVisibility(e){e.visible=!e.visible,this.updateDisplayedColumns()}openCreateDialog(){this.dialog.open(rt,{data:{action:"CREATE",title:"Gallery Management",payload:null},width:"600px"}).afterClosed().subscribe(n=>{null!=n&&""!=n&&this.getAllMedia()})}openUpdateDialog(e){this.dialog.open(rt,{data:{action:"UPDATE",title:"Gallery Management",payload:e},width:"600px"}).afterClosed().subscribe(i=>{null!=i&&""!=i&&this.getAllMedia()})}delete(e){console.log("delete row",e),this.dialog.open(A,{width:"400px",data:{title:"Confirm Delete",body:"Are you sure you want to Delete"+e.imageMetadata.caption,confirmText:"Yes",cancelText:"No"}}).afterClosed().subscribe(i=>{null!=i&&""!=i&&this.masterService.deleteMedia(e.id).subscribe({next:o=>{this._snackBar.open("Media deleted successfully.","Close",{duration:5e3}),this.getAllMedia()},error:o=>{console.log(o),this._snackBar.open(o.error.message,"Close",{duration:5e3,panelClass:["style-error"]})}})})}openPreview(e){this.dialog.open(Nt,{data:{title:e?.imageMetadata?.caption,fileUrl:this.baseUrl+e?.url,fileType:"image"},width:"600px",panelClass:"custom-dialog-container"})}static{this.\u0275fac=function(n){return new(n||a)(t.rXU(s.bZ),t.rXU(O.Ix),t.rXU(l.ok),t.rXU(k.m),t.rXU(F.UG),t.rXU(t.gRc))}}static{this.\u0275cmp=t.VBU({type:a,selectors:[["CoreLab-gallery"]],viewQuery:function(n,i){if(1&n&&(t.GBs(ee,7),t.GBs(ie,7),t.GBs(ne,7)),2&n){let o;t.mGM(o=t.lsd())&&(i.actionsTemplate=o.first),t.mGM(o=t.lsd())&&(i.firstPosTemplate=o.first),t.mGM(o=t.lsd())&&(i.imageTemplate=o.first)}},features:[t.OA$],decls:29,vars:7,consts:[["mode","card",2,"padding-top","16px"],["fxLayout","row","fxLayoutAlign","space-between center",2,"margin-top","16px"],["fxLayout","row wrap","fxLayoutGap","16px","fxLayoutAlign","start center",1,"filter-container",3,"formGroup"],["appearance","outline","fxFlex.xs","100%","fxFlex.sm","45%","fxFlex.md","30%"],["matInput","","formControlName","key","placeholder","Search..."],["appearance","outline",1,"full-width"],["formControlName","category"],["value","Timeline"],["value","Movie"],["type","button","mat-mini-fab","","color","primary",3,"click"],["firstPosTemplate",""],["actionsTemplate",""],["style","justify-items: center;"],["imageTemplate",""],["noDataLabel","No Gallery image found",3,"columns","data","usePaginator","pageSize","pageSizeOptions","totalRecords","pageChange"],["type","button","mat-icon-button","",3,"matMenuTriggerFor","click"],["yPosition","below","xPosition","before"],["actionsMenu","matMenu"],["mat-menu-item","",3,"click"],["fxLayoutAlign","start center"],["alt","item image","width","50","height","50",2,"border-radius","8px",3,"src"]],template:function(n,i){1&n&&(t.j41(0,"fury-page-layout",0)(1,"fury-page-layout-content")(2,"fury-card-content")(3,"div",1)(4,"form",2)(5,"div")(6,"mat-form-field",3)(7,"mat-label"),t.EFF(8,"Search"),t.k0s(),t.nrm(9,"input",4),t.k0s()(),t.j41(10,"mat-form-field",5)(11,"mat-label"),t.EFF(12,"Category"),t.k0s(),t.j41(13,"mat-select",6)(14,"mat-option",7),t.EFF(15,"Timeline"),t.k0s(),t.j41(16,"mat-option",8),t.EFF(17,"Movie"),t.k0s()()()(),t.j41(18,"div")(19,"button",9),t.bIt("click",function(){return i.openCreateDialog()}),t.j41(20,"mat-icon"),t.EFF(21,"add"),t.k0s()()()(),t.DNE(22,ae,1,1,"ng-template",null,10,t.C5r),t.DNE(24,oe,20,1,"ng-template",null,11,t.C5r),t.DNE(26,re,1,1,"ng-template",12,13,t.C5r),t.j41(28,"shared-data-table",14),t.bIt("pageChange",function(r){return i.onPageChange(r)}),t.k0s()()()()),2&n&&(t.R7$(4),t.Y8G("formGroup",i.form),t.R7$(24),t.Y8G("columns",i.displayedColumns)("data",i.mediaList)("usePaginator",!0)("pageSize",i.size)("pageSizeOptions",i.pageSizeList)("totalRecords",i.recordCount))},dependencies:[x.fg,m.rl,m.nJ,y.An,g.iY,g.$0,v.kk,v.fb,v.Cp,f.wT,j.VO,_.DJ,_.BO,_.sA,_.UI,l.qT,l.me,l.BC,l.cb,l.j4,l.JD,$,N,U.cN,z]})}}return a})();function le(a,c){1&a&&(t.j41(0,"mat-error"),t.EFF(1," Username is required "),t.k0s())}function se(a,c){1&a&&(t.j41(0,"mat-error"),t.EFF(1," Username must be at least 3 characters "),t.k0s())}function de(a,c){1&a&&(t.j41(0,"mat-error"),t.EFF(1," About section is required "),t.k0s())}function pe(a,c){if(1&a&&(t.j41(0,"div",25),t.nrm(1,"img",26),t.j41(2,"div",27)(3,"mat-icon"),t.EFF(4,"camera_alt"),t.k0s(),t.j41(5,"span"),t.EFF(6,"Change"),t.k0s()()()),2&a){const e=t.XpG();t.R7$(1),t.Y8G("src",e.thumbnailPreview,t.B4B)}}function me(a,c){1&a&&(t.j41(0,"div",28)(1,"mat-icon",29),t.EFF(2,"add_photo_alternate"),t.k0s(),t.j41(3,"span"),t.EFF(4,"Upload Thumbnail"),t.k0s(),t.j41(5,"p",30),t.EFF(6,"JPG, JPEG, PNG | Max 2MB"),t.k0s()())}function he(a,c){1&a&&(t.j41(0,"span"),t.EFF(1," Only JPG, JPEG, and PNG files are allowed "),t.k0s())}function ue(a,c){1&a&&(t.j41(0,"span"),t.EFF(1," Maximum file size is 2MB "),t.k0s())}function ge(a,c){if(1&a&&(t.j41(0,"div",31),t.DNE(1,he,2,0,"span",6),t.DNE(2,ue,2,0,"span",6),t.k0s()),2&a){const e=t.XpG();let n,i;t.R7$(1),t.Y8G("ngIf",null==(n=e.castForm.get("thumbnail"))||null==n.errors?null:n.errors.fileType),t.R7$(1),t.Y8G("ngIf",null==(i=e.castForm.get("thumbnail"))||null==i.errors?null:i.errors.fileSize)}}function _e(a,c){if(1&a){const e=t.RV6();t.j41(0,"button",32),t.bIt("click",function(i){return t.eBV(e),t.XpG().clearFile("thumbnail"),t.Njj(i.stopPropagation())}),t.j41(1,"mat-icon"),t.EFF(2,"delete"),t.k0s(),t.EFF(3," Remove "),t.k0s()}}function fe(a,c){if(1&a&&(t.j41(0,"div",25),t.nrm(1,"img",33),t.j41(2,"div",27)(3,"mat-icon"),t.EFF(4,"camera_alt"),t.k0s(),t.j41(5,"span"),t.EFF(6,"Change"),t.k0s()()()),2&a){const e=t.XpG();t.R7$(1),t.Y8G("src",e.photoPreview,t.B4B)}}function ve(a,c){1&a&&(t.j41(0,"div",28)(1,"mat-icon",29),t.EFF(2,"add_photo_alternate"),t.k0s(),t.j41(3,"span"),t.EFF(4,"Upload Photo"),t.k0s(),t.j41(5,"p",30),t.EFF(6,"JPG, JPEG, PNG | Max 2MB"),t.k0s()())}function be(a,c){1&a&&(t.j41(0,"span"),t.EFF(1," Only JPG, JPEG, and PNG files are allowed "),t.k0s())}function Ce(a,c){1&a&&(t.j41(0,"span"),t.EFF(1," Maximum file size is 2MB "),t.k0s())}function ye(a,c){if(1&a&&(t.j41(0,"div",31),t.DNE(1,be,2,0,"span",6),t.DNE(2,Ce,2,0,"span",6),t.k0s()),2&a){const e=t.XpG();let n,i;t.R7$(1),t.Y8G("ngIf",null==(n=e.castForm.get("photo"))||null==n.errors?null:n.errors.fileType),t.R7$(1),t.Y8G("ngIf",null==(i=e.castForm.get("photo"))||null==i.errors?null:i.errors.fileSize)}}function we(a,c){if(1&a){const e=t.RV6();t.j41(0,"button",32),t.bIt("click",function(i){return t.eBV(e),t.XpG().clearFile("photo"),t.Njj(i.stopPropagation())}),t.j41(1,"mat-icon"),t.EFF(2,"delete"),t.k0s(),t.EFF(3," Remove "),t.k0s()}}let lt=(()=>{class a{constructor(e,n,i,o,r){this.fb=e,this.masterService=n,this._snackBar=i,this.dialogRef=o,this.data=r,this.baseUrl=C.c.server,this.thumbnailPreview=null,this.photoPreview=null,this.castForm=this.fb.group({username:["",[l.k0.required,l.k0.minLength(3)]],about:["",l.k0.required],thumbnail:[null],photo:[null]}),r?.payload&&(this.castForm.patchValue({username:r.payload.info.username,about:r.payload.info.about}),r.payload?.profile?.thumbnail&&(this.thumbnailPreview=this.baseUrl+r.payload?.profile?.thumbnail),r.payload?.profile?.url&&(this.photoPreview=this.baseUrl+r.payload?.profile?.url))}triggerFileInput(e){document.getElementById(e)?.click()}onFileChange(e,n){const i=e.target.files[0];if(i){if(i.size>2097152)return void alert("File size must be less than 2MB");this.castForm.patchValue({[n]:i}),this.castForm.get(n)?.updateValueAndValidity();const o=new FileReader;o.onload=()=>{"thumbnail"===n?this.thumbnailPreview=o.result:this.photoPreview=o.result},o.readAsDataURL(i)}}clearFile(e){"thumbnail"===e?this.thumbnailPreview=null:this.photoPreview=null,this.castForm.patchValue({[e]:null})}onSubmit(){if(this.castForm.invalid)return void this.castForm.markAllAsTouched();if("UPDATE"!==this.data?.action){if(!(this.castForm.value.thumbnail&&this.castForm.value.thumbnail instanceof File))return void this._snackBar.open("Thumbnail is required","Close",{duration:3e3,panelClass:["style-error"]});if(!(this.castForm.value.photo&&this.castForm.value.photo instanceof File))return void this._snackBar.open("Photo is required","Close",{duration:3e3,panelClass:["style-error"]})}const e=new FormData,n={username:this.castForm.value.username.trim(),about:this.castForm.value.about.trim()};e.append("info",JSON.stringify(n)),this.castForm.value.thumbnail instanceof File&&e.append("profile.thumbnail",this.castForm.value.thumbnail),this.castForm.value.photo instanceof File&&e.append("profile.file",this.castForm.value.photo),e.forEach((i,o)=>{console.log(o,i)}),"UPDATE"===this.data?.action?(e.append("profile.id",this.data?.payload?.profile.id.toString()),this.updateActor(this.data.payload.id,e)):this.createActor(e)}createActor(e){this.masterService.createActorApi(e).subscribe({next:n=>{this._snackBar.open("Actor created successfully","Close",{duration:3e3,panelClass:["style-success"]}),this.dialogRef.close(n)},error:n=>{this._snackBar.open(n.error?.message||"Creation failed","Close",{duration:5e3,panelClass:["style-error"]})}})}updateActor(e,n){this.masterService.updateActorApi(e,n).subscribe({next:i=>{this._snackBar.open("Actor updated successfully","Close",{duration:3e3,panelClass:["style-success"]}),this.dialogRef.close(i)},error:i=>{this._snackBar.open(i.error?.message||"Update failed","Close",{duration:5e3,panelClass:["style-error"]})}})}close(){this.dialogRef.close()}static{this.\u0275fac=function(n){return new(n||a)(t.rXU(l.ok),t.rXU(k.m),t.rXU(F.UG),t.rXU(s.CP),t.rXU(s.Vh))}}static{this.\u0275cmp=t.VBU({type:a,selectors:[["CoreLab-manage-casts"]],decls:51,vars:20,consts:[["mat-dialog-title",""],[1,"mat-typography"],[1,"cast-form",3,"formGroup"],["appearance","outline",1,"full-width"],["matInput","","formControlName","username","placeholder","Enter username"],["matSuffix",""],[4,"ngIf"],["matInput","","formControlName","about","rows","4","placeholder","Tell us about this cast member"],["aboutInput",""],["align","end"],[1,"image-upload-section"],[1,"upload-hint"],[1,"image-row"],[1,"image-upload-card"],[1,"image-label"],["type","file","id","thumbnailInput","accept",".jpg,.jpeg,.png","hidden","",3,"change"],[1,"image-preview-container",3,"click"],["class","preview-wrapper",4,"ngIf","ngIfElse"],["noThumbTemplate",""],["class","error-message",4,"ngIf"],["mat-button","","color","warn","class","clear-btn",3,"click",4,"ngIf"],["type","file","id","photoInput","accept",".jpg,.jpeg,.png","hidden","",3,"change"],["noPhotoTemplate",""],["mat-stroked-button","","color","basic",3,"click"],["mat-flat-button","","color","primary",3,"disabled","click"],[1,"preview-wrapper"],["alt","Thumbnail preview",1,"preview-image",3,"src"],[1,"image-overlay"],[1,"upload-placeholder"],[1,"upload-icon"],[1,"rules-text"],[1,"error-message"],["mat-button","","color","warn",1,"clear-btn",3,"click"],["alt","Photo preview",1,"preview-image",3,"src"]],template:function(n,i){if(1&n&&(t.j41(0,"h2",0),t.EFF(1),t.k0s(),t.j41(2,"mat-dialog-content",1)(3,"form",2)(4,"mat-form-field",3)(5,"mat-label"),t.EFF(6,"Username"),t.k0s(),t.nrm(7,"input",4),t.j41(8,"mat-icon",5),t.EFF(9,"person"),t.k0s(),t.DNE(10,le,2,0,"mat-error",6),t.DNE(11,se,2,0,"mat-error",6),t.k0s(),t.j41(12,"mat-form-field",3)(13,"mat-label"),t.EFF(14,"About"),t.k0s(),t.nrm(15,"textarea",7,8),t.j41(17,"mat-hint",9),t.EFF(18),t.k0s(),t.DNE(19,de,2,0,"mat-error",6),t.k0s(),t.j41(20,"div",10)(21,"h3"),t.EFF(22,"Images"),t.k0s(),t.j41(23,"p",11),t.EFF(24,"Upload thumbnail and photo"),t.k0s(),t.j41(25,"div",12)(26,"div",13)(27,"p",14),t.EFF(28,"Thumbnail"),t.k0s(),t.j41(29,"input",15),t.bIt("change",function(r){return i.onFileChange(r,"thumbnail")}),t.k0s(),t.j41(30,"div",16),t.bIt("click",function(){return i.triggerFileInput("thumbnailInput")}),t.DNE(31,pe,7,1,"div",17),t.DNE(32,me,7,0,"ng-template",null,18,t.C5r),t.k0s(),t.DNE(34,ge,3,2,"div",19),t.DNE(35,_e,4,0,"button",20),t.k0s(),t.j41(36,"div",13)(37,"p",14),t.EFF(38,"Photo"),t.k0s(),t.j41(39,"input",21),t.bIt("change",function(r){return i.onFileChange(r,"photo")}),t.k0s(),t.j41(40,"div",16),t.bIt("click",function(){return i.triggerFileInput("photoInput")}),t.DNE(41,fe,7,1,"div",17),t.DNE(42,ve,7,0,"ng-template",null,22,t.C5r),t.k0s(),t.DNE(44,ye,3,2,"div",19),t.DNE(45,we,4,0,"button",20),t.k0s()()()()(),t.j41(46,"mat-dialog-actions",9)(47,"button",23),t.bIt("click",function(){return i.close()}),t.EFF(48,"Cancel"),t.k0s(),t.j41(49,"button",24),t.bIt("click",function(){return i.onSubmit()}),t.EFF(50),t.k0s()()),2&n){const o=t.sdS(16),r=t.sdS(33),d=t.sdS(43);let u,b,P,T,G;t.R7$(1),t.JRh("UPDATE"==i.data.action?"Update Cast Member":"Add New Cast Member"),t.R7$(2),t.Y8G("formGroup",i.castForm),t.R7$(7),t.Y8G("ngIf",null==(u=i.castForm.get("username"))?null:u.hasError("required")),t.R7$(1),t.Y8G("ngIf",null==(b=i.castForm.get("username"))?null:b.hasError("minlength")),t.R7$(7),t.SpI("",(null==o.value?null:o.value.length)||0,"/250"),t.R7$(1),t.Y8G("ngIf",null==(P=i.castForm.get("about"))?null:P.hasError("required")),t.R7$(11),t.AVh("has-image",i.thumbnailPreview),t.R7$(1),t.Y8G("ngIf",i.thumbnailPreview)("ngIfElse",r),t.R7$(3),t.Y8G("ngIf",null==(T=i.castForm.get("thumbnail"))?null:T.errors),t.R7$(1),t.Y8G("ngIf",i.thumbnailPreview),t.R7$(5),t.AVh("has-image",i.photoPreview),t.R7$(1),t.Y8G("ngIf",i.photoPreview)("ngIfElse",d),t.R7$(3),t.Y8G("ngIf",null==(G=i.castForm.get("photo"))?null:G.errors),t.R7$(1),t.Y8G("ngIf",i.photoPreview),t.R7$(4),t.Y8G("disabled",i.castForm.invalid||!i.castForm.dirty&&!(null!=i.data&&null!=i.data.payload&&i.data.payload.id)),t.R7$(1),t.SpI(" ","UPDATE"==i.data.action?"Update":"Create"," ")}},dependencies:[h.bT,x.fg,m.rl,m.nJ,m.MV,m.TL,m.yw,y.An,g.$z,s.BI,s.Yi,s.E7,l.qT,l.me,l.BC,l.cb,l.j4,l.JD],styles:[".cast-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.full-width[_ngcontent-%COMP%]{width:100%}.image-upload-section[_ngcontent-%COMP%]{margin-top:1rem}.image-upload-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:.25rem}.image-upload-section[_ngcontent-%COMP%]   .upload-hint[_ngcontent-%COMP%]{font-size:.85rem;color:#757575;margin-bottom:1rem}.image-upload-section[_ngcontent-%COMP%]   .image-row[_ngcontent-%COMP%]{display:flex;gap:1rem}.image-upload-section[_ngcontent-%COMP%]   .image-upload-card[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;gap:.5rem}.image-upload-section[_ngcontent-%COMP%]   .image-upload-card[_ngcontent-%COMP%]   .image-label[_ngcontent-%COMP%]{font-weight:500;margin-bottom:.25rem}.image-upload-section[_ngcontent-%COMP%]   .image-upload-card[_ngcontent-%COMP%]   .image-preview-container[_ngcontent-%COMP%]{position:relative;border:2px dashed #ccc;border-radius:8px;height:180px;display:flex;align-items:center;justify-content:center;cursor:pointer;overflow:hidden;transition:border-color .2s ease}.image-upload-section[_ngcontent-%COMP%]   .image-upload-card[_ngcontent-%COMP%]   .image-preview-container[_ngcontent-%COMP%]:hover{border-color:#3f51b5}.image-upload-section[_ngcontent-%COMP%]   .image-upload-card[_ngcontent-%COMP%]   .image-preview-container.has-image[_ngcontent-%COMP%]{border:none}.image-upload-section[_ngcontent-%COMP%]   .image-upload-card[_ngcontent-%COMP%]   .image-preview-container[_ngcontent-%COMP%]   .preview-wrapper[_ngcontent-%COMP%]{width:100%;height:100%;position:relative}.image-upload-section[_ngcontent-%COMP%]   .image-upload-card[_ngcontent-%COMP%]   .image-preview-container[_ngcontent-%COMP%]   .preview-wrapper[_ngcontent-%COMP%]   .preview-image[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;border-radius:8px}.image-upload-section[_ngcontent-%COMP%]   .image-upload-card[_ngcontent-%COMP%]   .image-preview-container[_ngcontent-%COMP%]   .preview-wrapper[_ngcontent-%COMP%]   .image-overlay[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;right:0;background:rgba(0,0,0,.5);color:#fff;padding:4px;display:flex;align-items:center;justify-content:center;gap:4px;font-size:.9rem}.image-upload-section[_ngcontent-%COMP%]   .image-upload-card[_ngcontent-%COMP%]   .image-preview-container[_ngcontent-%COMP%]   .upload-placeholder[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;text-align:center;gap:4px}.image-upload-section[_ngcontent-%COMP%]   .image-upload-card[_ngcontent-%COMP%]   .image-preview-container[_ngcontent-%COMP%]   .upload-placeholder[_ngcontent-%COMP%]   .upload-icon[_ngcontent-%COMP%]{font-size:48px;color:#9e9e9e}.image-upload-section[_ngcontent-%COMP%]   .image-upload-card[_ngcontent-%COMP%]   .image-preview-container[_ngcontent-%COMP%]   .upload-placeholder[_ngcontent-%COMP%]   .rules-text[_ngcontent-%COMP%]{font-size:12px;color:#757575}.image-upload-section[_ngcontent-%COMP%]   .image-upload-card[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{font-size:.8rem;color:#d32f2f}.image-upload-section[_ngcontent-%COMP%]   .image-upload-card[_ngcontent-%COMP%]   .clear-btn[_ngcontent-%COMP%]{align-self:flex-start;margin-top:-.25rem}"]})}}return a})();function Me(a,c){if(1&a){const e=t.RV6();t.j41(0,"mat-card",14)(1,"button",15),t.bIt("click",function(){const o=t.eBV(e).$implicit,r=t.XpG(2);return t.Njj(r.onClickDelete(o.id))}),t.j41(2,"mat-icon"),t.EFF(3,"delete"),t.k0s()(),t.nrm(4,"img",16),t.j41(5,"mat-card-content")(6,"p"),t.EFF(7),t.k0s()()()}if(2&a){const e=c.$implicit,n=t.XpG(2);t.R7$(4),t.Y8G("src",n.baseUrl+(null==e?null:e.thumbnail),t.B4B)("alt",e.imageMetadata.caption),t.R7$(3),t.JRh(e.imageMetadata.caption)}}function ke(a,c){if(1&a&&(t.j41(0,"div",11)(1,"h3"),t.EFF(2,"Images"),t.k0s(),t.j41(3,"div",12),t.DNE(4,Me,8,3,"mat-card",13),t.k0s()()),2&a){const e=t.XpG();t.R7$(4),t.Y8G("ngForOf",e.images)("ngForTrackBy",e.trackByMediaId)}}function xe(a,c){if(1&a){const e=t.RV6();t.j41(0,"mat-card",14)(1,"button",15),t.bIt("click",function(){const o=t.eBV(e).$implicit,r=t.XpG(2);return t.Njj(r.onClickDelete(o.id))}),t.j41(2,"mat-icon"),t.EFF(3,"delete"),t.k0s()(),t.j41(4,"video",17),t.nrm(5,"source",18),t.EFF(6," Your browser does not support the video tag. "),t.k0s(),t.j41(7,"mat-card-content")(8,"p"),t.EFF(9),t.k0s()()()}if(2&a){const e=c.$implicit,n=t.XpG(2);t.R7$(5),t.Y8G("src",n.baseUrl+(null==e?null:e.url),t.B4B),t.R7$(4),t.JRh(e.videoMetadata.caption)}}function Fe(a,c){if(1&a&&(t.j41(0,"div",11)(1,"h3"),t.EFF(2,"Videos"),t.k0s(),t.j41(3,"div",12),t.DNE(4,xe,10,2,"mat-card",13),t.k0s()()),2&a){const e=t.XpG();t.R7$(4),t.Y8G("ngForOf",e.videos)("ngForTrackBy",e.trackByMediaId)}}let Ie=(()=>{class a{constructor(e,n,i,o){this.dialogRef=e,this.masterService=n,this._snackBar=i,this.data=o,this.baseUrl=C.c.server,this.images=[],this.videos=[]}ngOnInit(){this.images=this.getMediaByType("IMAGE_ACTOR"),this.videos=this.getMediaByType("VIDEO_ACTOR")}onClose(){this.dialogRef.close()}trackByMediaId(e,n){return n.id}getMediaByType(e){return this.data.galleries?this.data.galleries.filter(n=>n.fileType===e):[]}onClickDelete(e){this.masterService.deleteActorMediaGallery(e).subscribe({next:()=>{this.data.galleries&&(this.data.galleries=this.data.galleries.filter(n=>n.id!==e)),this.images=this.getMediaByType("IMAGE_ACTOR"),this.videos=this.getMediaByType("VIDEO_ACTOR"),this._snackBar.open("Media deleted successfully.","Close",{duration:5e3})},error:n=>{console.log(n),this._snackBar.open(n.error.message,"Close",{duration:5e3,panelClass:["style-error"]})}})}static{this.\u0275fac=function(n){return new(n||a)(t.rXU(s.CP),t.rXU(k.m),t.rXU(F.UG),t.rXU(s.Vh))}}static{this.\u0275cmp=t.VBU({type:a,selectors:[["CoreLab-view-actor"]],decls:20,vars:6,consts:[[1,"user-profile-dialog"],["mat-dialog-title","",1,"dialog-header"],[1,"username"],["mat-icon-button","",1,"close-button",3,"click"],["mat-dialog-content","",1,"dialog-content"],[1,"profile-section"],[1,"profile-photo",3,"src","alt"],[1,"about-section"],["class","media-section",4,"ngIf"],["mat-dialog-actions","",1,"dialog-actions"],["mat-button","",3,"click"],[1,"media-section"],[1,"media-grid"],["class","media-card",4,"ngFor","ngForOf","ngForTrackBy"],[1,"media-card"],["mat-icon-button","",1,"delete-button",3,"click"],["mat-card-image","",3,"src","alt"],["controls",""],["type","video/mp4",3,"src"]],template:function(n,i){1&n&&(t.j41(0,"div",0)(1,"div",1)(2,"h2",2),t.EFF(3),t.k0s(),t.j41(4,"button",3),t.bIt("click",function(){return i.onClose()}),t.j41(5,"mat-icon"),t.EFF(6,"close"),t.k0s()()(),t.j41(7,"div",4)(8,"div",5),t.nrm(9,"img",6),t.j41(10,"div",7)(11,"h3"),t.EFF(12,"About"),t.k0s(),t.j41(13,"p"),t.EFF(14),t.k0s()()(),t.DNE(15,ke,5,2,"div",8),t.DNE(16,Fe,5,2,"div",8),t.k0s(),t.j41(17,"div",9)(18,"button",10),t.bIt("click",function(){return i.onClose()}),t.EFF(19,"Close"),t.k0s()()()),2&n&&(t.R7$(3),t.JRh(i.data.info.username),t.R7$(6),t.Y8G("src",i.baseUrl+(null==i.data||null==i.data.profile?null:i.data.profile.thumbnail),t.B4B)("alt",i.data.info.username),t.R7$(5),t.JRh(i.data.info.about),t.R7$(1),t.Y8G("ngIf",i.images.length),t.R7$(1),t.Y8G("ngIf",i.videos.length))},dependencies:[h.Sq,h.bT,y.An,g.$z,g.iY,s.BI,s.Yi,s.E7,R.RN,R.m2,R.kF],styles:[".user-profile-dialog[_ngcontent-%COMP%]{max-width:800px;margin:16px;border:2px dashed #ccc}.user-profile-dialog[_ngcontent-%COMP%]   .dialog-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px}.user-profile-dialog[_ngcontent-%COMP%]   .dialog-header[_ngcontent-%COMP%]   .username[_ngcontent-%COMP%]{margin:0;color:#3f51b5}.user-profile-dialog[_ngcontent-%COMP%]   .dialog-header[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]{margin-right:-8px}.user-profile-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]{max-height:70vh;overflow-y:auto;padding:8px}.user-profile-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .profile-section[_ngcontent-%COMP%]{display:flex;margin-bottom:24px}.user-profile-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .profile-section[_ngcontent-%COMP%]   .profile-photo[_ngcontent-%COMP%]{width:120px;height:120px;border-radius:50%;object-fit:cover;margin-right:24px}.user-profile-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .profile-section[_ngcontent-%COMP%]   .about-section[_ngcontent-%COMP%]{flex:1}.user-profile-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .profile-section[_ngcontent-%COMP%]   .about-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:0;color:#3f51b5}.user-profile-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .profile-section[_ngcontent-%COMP%]   .about-section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{line-height:1.6;margin-bottom:12px}.user-profile-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .media-section[_ngcontent-%COMP%]{margin-bottom:24px}.user-profile-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .media-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#3f51b5;border-bottom:1px solid #e0e0e0;padding-bottom:8px}.user-profile-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .media-section[_ngcontent-%COMP%]   .media-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:16px;margin-top:16px}.user-profile-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .media-section[_ngcontent-%COMP%]   .media-grid[_ngcontent-%COMP%]   .media-card[_ngcontent-%COMP%]{transition:box-shadow .3s ease}.user-profile-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .media-section[_ngcontent-%COMP%]   .media-grid[_ngcontent-%COMP%]   .media-card[_ngcontent-%COMP%]:hover{box-shadow:0 4px 8px #0003}.user-profile-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .media-section[_ngcontent-%COMP%]   .media-grid[_ngcontent-%COMP%]   .media-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{padding:8px 16px}.user-profile-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .media-section[_ngcontent-%COMP%]   .media-grid[_ngcontent-%COMP%]   .media-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.user-profile-dialog[_ngcontent-%COMP%]   .dialog-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:8px;padding:16px 0 0}@media (max-width: 600px){.user-profile-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .profile-section[_ngcontent-%COMP%]{flex-direction:column}.user-profile-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .profile-section[_ngcontent-%COMP%]   .profile-photo[_ngcontent-%COMP%]{margin-right:0;margin-bottom:16px;align-self:center}.user-profile-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .media-section[_ngcontent-%COMP%]   .media-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(150px,1fr))}}.media-card[_ngcontent-%COMP%]{position:relative}.delete-button[_ngcontent-%COMP%]{position:absolute;top:4px;color:red;right:4px;background:rgba(255,255,255,.7);border-radius:50%;z-index:10}"]})}}return a})();function Pe(a,c){1&a&&(t.j41(0,"mat-error"),t.EFF(1," Caption is required "),t.k0s())}function Ee(a,c){1&a&&(t.j41(0,"mat-error"),t.EFF(1," Caption must be at least 3 characters "),t.k0s())}function Te(a,c){if(1&a&&(t.j41(0,"div"),t.nrm(1,"img",18),t.j41(2,"div",19)(3,"mat-icon"),t.EFF(4,"camera_alt"),t.k0s(),t.EFF(5," Change"),t.k0s()()),2&a){const e=t.XpG();t.R7$(1),t.Y8G("src",e.thumbnailPreview,t.B4B)}}function Ge(a,c){1&a&&(t.j41(0,"div",20)(1,"mat-icon"),t.EFF(2,"add_photo_alternate"),t.k0s(),t.j41(3,"span"),t.EFF(4,"Upload Thumbnail"),t.k0s(),t.j41(5,"p"),t.EFF(6,"JPG, JPEG, PNG | Max 2MB"),t.k0s()())}function Oe(a,c){if(1&a){const e=t.RV6();t.j41(0,"button",21),t.bIt("click",function(i){return t.eBV(e),t.XpG().clearFile("thumbnail"),t.Njj(i.stopPropagation())}),t.j41(1,"mat-icon"),t.EFF(2,"delete"),t.k0s(),t.EFF(3," Remove "),t.k0s()}}function je(a,c){if(1&a&&t.nrm(0,"img",24),2&a){const e=t.XpG(2);t.Y8G("src",e.filePreview,t.B4B)}}function Re(a,c){if(1&a&&t.nrm(0,"video",25),2&a){const e=t.XpG(2);t.Y8G("src",e.filePreview,t.B4B)}}function De(a,c){if(1&a&&(t.j41(0,"div"),t.DNE(1,je,1,1,"img",22),t.DNE(2,Re,1,1,"video",23),t.j41(3,"div",19)(4,"mat-icon"),t.EFF(5,"camera_alt"),t.k0s(),t.EFF(6," Change "),t.k0s()()),2&a){const e=t.XpG();t.R7$(1),t.Y8G("ngIf","IMAGE"===e.data.type),t.R7$(1),t.Y8G("ngIf","VIDEO"===e.data.type)}}function Ve(a,c){1&a&&(t.j41(0,"p"),t.EFF(1,"JPG, JPEG, PNG | Max 2MB"),t.k0s())}function Se(a,c){1&a&&(t.j41(0,"p"),t.EFF(1,"MP4, WebM, OGG | Max 50MB"),t.k0s())}function Be(a,c){if(1&a&&(t.j41(0,"div",20)(1,"mat-icon"),t.EFF(2,"add_photo_alternate"),t.k0s(),t.j41(3,"span"),t.EFF(4),t.k0s(),t.DNE(5,Ve,2,0,"p",5),t.DNE(6,Se,2,0,"p",5),t.k0s()),2&a){const e=t.XpG();t.R7$(4),t.SpI("Upload ","IMAGE"===e.data.type?"Photo":"Video",""),t.R7$(1),t.Y8G("ngIf","IMAGE"===e.data.type),t.R7$(1),t.Y8G("ngIf","VIDEO"===e.data.type)}}function Ae(a,c){if(1&a){const e=t.RV6();t.j41(0,"button",21),t.bIt("click",function(i){return t.eBV(e),t.XpG().clearFile("file"),t.Njj(i.stopPropagation())}),t.j41(1,"mat-icon"),t.EFF(2,"delete"),t.k0s(),t.EFF(3," Remove "),t.k0s()}}let $e=(()=>{class a{constructor(e,n,i,o,r){this.fb=e,this.masterService=n,this._snackBar=i,this.dialogRef=o,this.data=r,this.baseUrl=C.c.server,this.thumbnailPreview=null,this.filePreview=null,this.castForm=this.fb.group({caption:["",[l.k0.required,l.k0.minLength(3)]],thumbnail:[null],file:[null]})}triggerFileInput(e){document.getElementById(e)?.click()}onFileChange(e,n){const i=e.target.files[0];if(!i)return;let o=0;if("thumbnail"===n&&(o=2097152,!i.type.startsWith("image/")))return void this._snackBar.open("Only image files are allowed for thumbnail","Close",{duration:3e3});if("file"===n)if("IMAGE"===this.data.type){if(o=2097152,!i.type.startsWith("image/"))return void this._snackBar.open("Only image files are allowed","Close",{duration:3e3})}else if("VIDEO"===this.data.type&&(o=52428800,!i.type.startsWith("video/")))return void this._snackBar.open("Only video files are allowed","Close",{duration:3e3});if(i.size>o)return void this._snackBar.open("thumbnail"===n?"Thumbnail must be less than 2MB":"IMAGE"===this.data.type?"Image must be less than 2MB":"Video must be less than 10MB","Close",{duration:3e3});this.castForm.patchValue({[n]:i}),this.castForm.get(n)?.updateValueAndValidity();const r=new FileReader;r.onload=()=>{"thumbnail"===n?this.thumbnailPreview=r.result:this.filePreview=r.result},r.readAsDataURL(i)}clearFile(e){"thumbnail"===e?this.thumbnailPreview=null:this.filePreview=null,this.castForm.patchValue({[e]:null})}onSubmit(){if(this.castForm.invalid)return void this.castForm.markAllAsTouched();const e=new FormData;e.append("caption",this.castForm.value.caption.trim()),this.castForm.value.thumbnail instanceof File&&e.append("thumbnail",this.castForm.value.thumbnail),this.castForm.value.file instanceof File&&e.append("file",this.castForm.value.file),"VIDEO"===this.data.type?this.addVideo(this.data.id,e):this.addImage(this.data.id,e)}addImage(e,n){this.masterService.addActorImage(e,n).subscribe({next:i=>{this._snackBar.open("Cast image uploaded successfully","Close",{duration:3e3}),this.dialogRef.close(i)},error:i=>{this._snackBar.open(i.error?.message||"Image upload failed","Close",{duration:5e3})}})}addVideo(e,n){this.masterService.addActorVideo(e,n).subscribe({next:i=>{this._snackBar.open("Cast video uploaded successfully","Close",{duration:3e3}),this.dialogRef.close(i)},error:i=>{this._snackBar.open(i.error?.message||"Video upload failed","Close",{duration:5e3})}})}close(){this.dialogRef.close()}static{this.\u0275fac=function(n){return new(n||a)(t.rXU(l.ok),t.rXU(k.m),t.rXU(F.UG),t.rXU(s.CP),t.rXU(s.Vh))}}static{this.\u0275cmp=t.VBU({type:a,selectors:[["CoreLab-upload-media"]],decls:33,vars:18,consts:[["mat-dialog-title",""],[1,"mat-typography"],[1,"cast-form",3,"formGroup"],["appearance","outline",1,"full-width"],["matInput","","formControlName","caption","placeholder","Enter caption"],[4,"ngIf"],[1,"image-upload-card"],[1,"image-label"],["type","file","id","thumbnailInput","accept",".jpg,.jpeg,.png","hidden","",3,"change"],[1,"image-preview-container",3,"click"],[4,"ngIf","ngIfElse"],["noThumbTemplate",""],["mat-button","","color","warn",3,"click",4,"ngIf"],["type","file","id","fileInput","hidden","",3,"accept","change"],["noFileTemplate",""],["align","end"],["mat-stroked-button","",3,"click"],["mat-flat-button","","color","primary",3,"disabled","click"],["alt","Thumbnail preview",1,"preview-image",3,"src"],[1,"image-overlay"],[1,"upload-placeholder"],["mat-button","","color","warn",3,"click"],["alt","Photo preview","class","preview-image",3,"src",4,"ngIf"],["class","preview-image","controls","",3,"src",4,"ngIf"],["alt","Photo preview",1,"preview-image",3,"src"],["controls","",1,"preview-image",3,"src"]],template:function(n,i){if(1&n&&(t.j41(0,"h2",0),t.EFF(1),t.k0s(),t.j41(2,"mat-dialog-content",1)(3,"form",2)(4,"mat-form-field",3)(5,"mat-label"),t.EFF(6,"Caption"),t.k0s(),t.nrm(7,"input",4),t.DNE(8,Pe,2,0,"mat-error",5),t.DNE(9,Ee,2,0,"mat-error",5),t.k0s(),t.j41(10,"div",6)(11,"p",7),t.EFF(12,"Thumbnail"),t.k0s(),t.j41(13,"input",8),t.bIt("change",function(r){return i.onFileChange(r,"thumbnail")}),t.k0s(),t.j41(14,"div",9),t.bIt("click",function(){return i.triggerFileInput("thumbnailInput")}),t.DNE(15,Te,6,1,"div",10),t.DNE(16,Ge,7,0,"ng-template",null,11,t.C5r),t.k0s(),t.DNE(18,Oe,4,0,"button",12),t.k0s(),t.j41(19,"div",6)(20,"p",7),t.EFF(21),t.k0s(),t.j41(22,"input",13),t.bIt("change",function(r){return i.onFileChange(r,"file")}),t.k0s(),t.j41(23,"div",9),t.bIt("click",function(){return i.triggerFileInput("fileInput")}),t.DNE(24,De,7,2,"div",10),t.DNE(25,Be,7,3,"ng-template",null,14,t.C5r),t.k0s(),t.DNE(27,Ae,4,0,"button",12),t.k0s()()(),t.j41(28,"mat-dialog-actions",15)(29,"button",16),t.bIt("click",function(){return i.close()}),t.EFF(30,"Cancel"),t.k0s(),t.j41(31,"button",17),t.bIt("click",function(){return i.onSubmit()}),t.EFF(32),t.k0s()()),2&n){const o=t.sdS(17),r=t.sdS(26);let d,u;t.R7$(1),t.JRh("IMAGE"===i.data.type?"Add Image":"Add Video"),t.R7$(2),t.Y8G("formGroup",i.castForm),t.R7$(5),t.Y8G("ngIf",null==(d=i.castForm.get("caption"))?null:d.hasError("required")),t.R7$(1),t.Y8G("ngIf",null==(u=i.castForm.get("caption"))?null:u.hasError("minlength")),t.R7$(5),t.AVh("has-image",i.thumbnailPreview),t.R7$(1),t.Y8G("ngIf",i.thumbnailPreview)("ngIfElse",o),t.R7$(3),t.Y8G("ngIf",i.thumbnailPreview),t.R7$(3),t.JRh("IMAGE"===i.data.type?"Photo":"Video"),t.R7$(1),t.Y8G("accept","IMAGE"===i.data.type?".jpg,.jpeg,.png":"video/mp4,video/webm,video/ogg"),t.R7$(1),t.AVh("has-image",i.filePreview),t.R7$(1),t.Y8G("ngIf",i.filePreview)("ngIfElse",r),t.R7$(3),t.Y8G("ngIf",i.filePreview),t.R7$(4),t.Y8G("disabled",i.castForm.invalid),t.R7$(1),t.SpI(" ","IMAGE"===i.data.type?"Upload Image":"Upload Video"," ")}},dependencies:[h.bT,x.fg,m.rl,m.nJ,m.TL,y.An,g.$z,s.BI,s.Yi,s.E7,l.qT,l.me,l.BC,l.cb,l.j4,l.JD],styles:[".cast-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5rem}.cast-form[_ngcontent-%COMP%]   .full-width[_ngcontent-%COMP%]{width:100%}.cast-form[_ngcontent-%COMP%]   .image-upload-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start;gap:.75rem}.cast-form[_ngcontent-%COMP%]   .image-upload-card[_ngcontent-%COMP%]   .image-label[_ngcontent-%COMP%]{font-weight:600;font-size:14px;margin:0}.cast-form[_ngcontent-%COMP%]   .image-upload-card[_ngcontent-%COMP%]   .image-preview-container[_ngcontent-%COMP%]{width:180px;height:180px;border:2px dashed #ccc;border-radius:12px;display:flex;justify-content:center;align-items:center;cursor:pointer;position:relative;overflow:hidden;transition:border-color .3s ease}.cast-form[_ngcontent-%COMP%]   .image-upload-card[_ngcontent-%COMP%]   .image-preview-container.has-image[_ngcontent-%COMP%]{border:none}.cast-form[_ngcontent-%COMP%]   .image-upload-card[_ngcontent-%COMP%]   .image-preview-container[_ngcontent-%COMP%]:hover{border-color:#3f51b5}.cast-form[_ngcontent-%COMP%]   .image-upload-card[_ngcontent-%COMP%]   .image-preview-container[_ngcontent-%COMP%]   .upload-placeholder[_ngcontent-%COMP%]{text-align:center;color:#888}.cast-form[_ngcontent-%COMP%]   .image-upload-card[_ngcontent-%COMP%]   .image-preview-container[_ngcontent-%COMP%]   .upload-placeholder[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{font-size:48px;color:#aaa;display:block;margin-bottom:8px}.cast-form[_ngcontent-%COMP%]   .image-upload-card[_ngcontent-%COMP%]   .image-preview-container[_ngcontent-%COMP%]   .upload-placeholder[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block;font-size:14px;font-weight:500}.cast-form[_ngcontent-%COMP%]   .image-upload-card[_ngcontent-%COMP%]   .image-preview-container[_ngcontent-%COMP%]   .upload-placeholder[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:12px;margin:4px 0 0;color:#999}.cast-form[_ngcontent-%COMP%]   .image-upload-card[_ngcontent-%COMP%]   .image-preview-container[_ngcontent-%COMP%]   .preview-image[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.cast-form[_ngcontent-%COMP%]   .image-upload-card[_ngcontent-%COMP%]   .image-preview-container[_ngcontent-%COMP%]   .image-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background:rgba(0,0,0,.5);color:#fff;opacity:0;display:flex;flex-direction:column;justify-content:center;align-items:center;transition:opacity .3s ease}.cast-form[_ngcontent-%COMP%]   .image-upload-card[_ngcontent-%COMP%]   .image-preview-container[_ngcontent-%COMP%]   .image-overlay[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:28px;margin-bottom:6px}.cast-form[_ngcontent-%COMP%]   .image-upload-card[_ngcontent-%COMP%]   .image-preview-container[_ngcontent-%COMP%]   .image-overlay[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:14px;font-weight:500}.cast-form[_ngcontent-%COMP%]   .image-upload-card[_ngcontent-%COMP%]   .image-preview-container[_ngcontent-%COMP%]:hover   .image-overlay[_ngcontent-%COMP%]{opacity:1}.cast-form[_ngcontent-%COMP%]   .image-upload-card[_ngcontent-%COMP%]   .clear-btn[_ngcontent-%COMP%]{margin-top:.25rem;font-size:13px;display:flex;align-items:center;gap:4px;padding:2px 6px}.cast-form[_ngcontent-%COMP%]   .image-upload-card[_ngcontent-%COMP%]   .clear-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px}mat-dialog-actions[_ngcontent-%COMP%]{margin-top:1rem}mat-dialog-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:90px}"]})}}return a})();const Ne=["actionsTemplate"],Ue=["firstPosTemplate"],ze=["profileTemplate"],Xe=["aboutTemplate"],Ye=["imageCountTemplate"],Le=["videoCountTemplate"];function Qe(a,c){if(1&a&&t.EFF(0),2&a){const e=c.index,n=t.XpG();t.SpI(" ",e+1+n.page*n.size,". ")}}function Je(a,c){if(1&a&&t.nrm(0,"img",15),2&a){const e=c.$implicit,n=t.XpG();t.Y8G("src",n.baseUrl+(null==e||null==e.profile?null:e.profile.thumbnail),t.B4B)}}function qe(a,c){if(1&a&&(t.j41(0,"span",16),t.EFF(1),t.k0s()),2&a){const e=c.$implicit;t.R7$(1),t.JRh(null==e||null==e.info?null:e.info.about)}}function He(a,c){if(1&a&&(t.j41(0,"span"),t.EFF(1),t.k0s()),2&a){const e=c.$implicit,n=t.XpG();t.R7$(1),t.JRh(n.getImageCount(e.galleries))}}function Ke(a,c){if(1&a&&(t.j41(0,"span"),t.EFF(1),t.k0s()),2&a){const e=c.$implicit,n=t.XpG();t.R7$(1),t.JRh(n.getVideoCount(e.galleries))}}function We(a,c){if(1&a){const e=t.RV6();t.qex(0),t.j41(1,"button",17),t.bIt("click",function(i){return i.stopPropagation()}),t.j41(2,"mat-icon"),t.EFF(3,"more_vert"),t.k0s()(),t.j41(4,"mat-menu",18,19)(6,"button",20),t.bIt("click",function(){const o=t.eBV(e).$implicit,r=t.XpG();return t.Njj(r.openUserProfileDialog(o))}),t.j41(7,"mat-icon"),t.EFF(8,"remove_red_eye"),t.k0s(),t.EFF(9," View "),t.k0s(),t.j41(10,"button",20),t.bIt("click",function(){const o=t.eBV(e).$implicit,r=t.XpG();return t.Njj(r.openUpdateDialog(o))}),t.j41(11,"mat-icon"),t.EFF(12,"edit"),t.k0s(),t.EFF(13," Edit "),t.k0s(),t.j41(14,"button",20),t.bIt("click",function(){const o=t.eBV(e).$implicit,r=t.XpG();return t.Njj(r.delete(o))}),t.j41(15,"span",21)(16,"mat-icon"),t.EFF(17,"delete"),t.k0s(),t.j41(18,"span"),t.EFF(19,"Delete"),t.k0s()()(),t.j41(20,"button",20),t.bIt("click",function(){const o=t.eBV(e).$implicit,r=t.XpG();return t.Njj(r.openAddMediaDialog("VIDEO",o.id))}),t.j41(21,"span",21)(22,"mat-icon"),t.EFF(23,"music_video"),t.k0s(),t.j41(24,"span"),t.EFF(25,"Add Video"),t.k0s()()(),t.j41(26,"button",20),t.bIt("click",function(){const o=t.eBV(e).$implicit,r=t.XpG();return t.Njj(r.openAddMediaDialog("IMAGE",o.id))}),t.j41(27,"span",21)(28,"mat-icon"),t.EFF(29,"image"),t.k0s(),t.j41(30,"span"),t.EFF(31,"Add Image"),t.k0s()()()(),t.bVm()}if(2&a){const e=t.sdS(5);t.R7$(1),t.Y8G("matMenuTriggerFor",e)}}let Ze=(()=>{class a{constructor(e,n,i,o,r,d){this.dialog=e,this.router=n,this.fb=i,this.masterService=o,this._snackBar=r,this.cdRef=d,this.baseUrl=C.c.server,this.columns=[],this.displayedColumns=[],this.page=0,this.size=10,this.pageSizeList=[10,25,50,100,250],this.castList=[]}ngOnInit(){this.columns=[{name:"#",property:"pos",visible:!0,alwaysShow:!0},{name:"Profile",property:"profile",visible:!0,alwaysShow:!0},{name:"Username",property:"username",visible:!0,alwaysShow:!0,valuePath:"info.username"},{name:"About",property:"about",visible:!0,alwaysShow:!0},{name:"Image",property:"imageCount",visible:!0,alwaysShow:!0},{name:"Video",property:"videoCount",visible:!0,alwaysShow:!0},{name:"Actions",property:"actions",visible:!0,alwaysShow:!0}],this.displayedColumns=this.columns,this.form=this.fb.group({key:[""],status:["true"],fromDate:[""],toDate:[""]}),this.form.valueChanges.pipe((0,S.B)(400)).subscribe(e=>{this.getAllCast()}),this.getAllCast()}onPageChange(e){this.page=e.pageIndex,this.size=e.pageSize,this.getAllCast()}getImageCount(e){return e?e.filter(n=>"IMAGE_ACTOR"===n.fileType).length:0}getVideoCount(e){return e?e.filter(n=>"VIDEO_ACTOR"===n.fileType).length:0}getAllCast(){let e={page:this.page,size:this.size,sort:"id,asc"};null!=this.form.get("key")?.value&&""!=this.form.get("key")?.value&&(e.key=this.form.get("key")?.value),this.masterService.getAllCastApi(e).subscribe({next:n=>{console.log("category data",n),this.recordCount=n.totalElements,this.castList=n.content},error:n=>{console.log(n)}})}ngOnChanges(){this.updateDisplayedColumns()}ngAfterViewInit(){setTimeout(()=>{const e={actions:this.actionsTemplate,pos:this.firstPosTemplate,about:this.aboutTemplate,profile:this.profileTemplate,imageCount:this.imageCountTemplate,videoCount:this.videoCountTemplate};this.columns.forEach(n=>{const i=e[n.property];i&&(n.cellTemplate=i)}),this.cdRef.detectChanges()})}clear(){this.form.reset(),this.form.get("status")?.setValue("Active")}updateDisplayedColumns(){this.displayedColumns=this.columns.filter(e=>e.visible)}toggleColumnVisibility(e){e.visible=!e.visible,this.updateDisplayedColumns()}openUserProfileDialog(e){this.dialog.open(Ie,{width:"90%",maxWidth:"900px",data:e,autoFocus:!1,panelClass:"user-profile-dialog-container"}).afterClosed().subscribe(i=>{console.log("The dialog was closed",i)})}openAddMediaDialog(e,n){this.dialog.open($e,{width:"90%",maxWidth:"900px",data:{type:e,id:n},autoFocus:!1,panelClass:"user-profile-dialog-container"}).afterClosed().subscribe(o=>{o&&this.getAllCast()})}openCreateDialog(){this.dialog.open(lt,{width:"600px",data:{}}).afterClosed().subscribe(n=>{n&&(console.log("Cast Created:",n),this.getAllCast())})}openUpdateDialog(e){this.dialog.open(lt,{data:{action:"UPDATE",title:"Attribute Management",payload:e},width:"600px"}).afterClosed().subscribe(i=>{null!=i&&""!=i&&this.getAllCast()})}delete(e){console.log("delete row",e),this.dialog.open(A,{width:"400px",data:{title:"Confirm Delete",body:"Are you sure you want to Delete"+e.info.username,confirmText:"Yes",cancelText:"No"}}).afterClosed().subscribe(i=>{null!=i&&""!=i&&this.masterService.deleteActor(e.id).subscribe({next:o=>{this._snackBar.open("Cast removed successfully.","Close",{duration:5e3}),this.getAllCast()},error:o=>{console.log(o),this._snackBar.open(o.error.message,"Close",{duration:5e3,panelClass:["style-error"]})}})})}static{this.\u0275fac=function(n){return new(n||a)(t.rXU(s.bZ),t.rXU(O.Ix),t.rXU(l.ok),t.rXU(k.m),t.rXU(F.UG),t.rXU(t.gRc))}}static{this.\u0275cmp=t.VBU({type:a,selectors:[["CoreLab-casts"]],viewQuery:function(n,i){if(1&n&&(t.GBs(Ne,7),t.GBs(Ue,7),t.GBs(ze,7),t.GBs(Xe,7),t.GBs(Ye,7),t.GBs(Le,7)),2&n){let o;t.mGM(o=t.lsd())&&(i.actionsTemplate=o.first),t.mGM(o=t.lsd())&&(i.firstPosTemplate=o.first),t.mGM(o=t.lsd())&&(i.profileTemplate=o.first),t.mGM(o=t.lsd())&&(i.aboutTemplate=o.first),t.mGM(o=t.lsd())&&(i.imageCountTemplate=o.first),t.mGM(o=t.lsd())&&(i.videoCountTemplate=o.first)}},features:[t.OA$],decls:27,vars:7,consts:[["mode","card",2,"padding-top","16px"],["fxLayout","row","fxLayoutAlign","space-between center",2,"margin-top","16px"],["fxLayout","row wrap","fxLayoutGap","16px","fxLayoutAlign","start center",1,"filter-container",3,"formGroup"],["appearance","outline","fxFlex.xs","100%","fxFlex.sm","45%","fxFlex.md","30%"],["matInput","","formControlName","key","placeholder","Search..."],["type","button","mat-mini-fab","","color","primary",3,"click"],["firstPosTemplate",""],["style","justify-items: center;"],["profileTemplate",""],["style","justify-items: center;","class","truncate-two-lines"],["aboutTemplate",""],["imageCountTemplate",""],["videoCountTemplate",""],["actionsTemplate",""],[3,"columns","data","usePaginator","pageSize","pageSizeOptions","totalRecords","pageChange"],["alt","profile","width","50","height","50",2,"border-radius","30px",3,"src"],[1,"truncate-two-lines"],["type","button","mat-icon-button","",3,"matMenuTriggerFor","click"],["yPosition","below","xPosition","before"],["actionsMenu","matMenu"],["mat-menu-item","",3,"click"],["fxLayoutAlign","start center"]],template:function(n,i){1&n&&(t.j41(0,"fury-page-layout",0)(1,"fury-page-layout-content")(2,"fury-card-content")(3,"div",1)(4,"form",2)(5,"div")(6,"mat-form-field",3)(7,"mat-label"),t.EFF(8,"Search"),t.k0s(),t.nrm(9,"input",4),t.k0s()()(),t.j41(10,"div")(11,"button",5),t.bIt("click",function(){return i.openCreateDialog()}),t.j41(12,"mat-icon"),t.EFF(13,"add"),t.k0s()()()(),t.DNE(14,Qe,1,1,"ng-template",null,6,t.C5r),t.DNE(16,Je,1,1,"ng-template",7,8,t.C5r),t.DNE(18,qe,2,1,"ng-template",9,10,t.C5r),t.DNE(20,He,2,1,"ng-template",7,11,t.C5r),t.DNE(22,Ke,2,1,"ng-template",7,12,t.C5r),t.DNE(24,We,32,1,"ng-template",null,13,t.C5r),t.j41(26,"shared-data-table",14),t.bIt("pageChange",function(r){return i.onPageChange(r)}),t.k0s()()()()),2&n&&(t.R7$(4),t.Y8G("formGroup",i.form),t.R7$(22),t.Y8G("columns",i.displayedColumns)("data",i.castList)("usePaginator",!0)("pageSize",i.size)("pageSizeOptions",i.pageSizeList)("totalRecords",i.recordCount))},dependencies:[x.fg,m.rl,m.nJ,y.An,g.iY,g.$0,v.kk,v.fb,v.Cp,_.DJ,_.BO,_.sA,_.UI,l.qT,l.me,l.BC,l.cb,l.j4,l.JD,$,N,U.cN,z],styles:[".truncate-two-lines[_ngcontent-%COMP%]{display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis}"]})}}return a})();function ti(a,c){1&a&&(t.j41(0,"mat-error"),t.EFF(1,"Title is required"),t.k0s())}function ei(a,c){if(1&a&&(t.j41(0,"mat-option",22),t.EFF(1),t.k0s()),2&a){const e=c.$implicit;t.Y8G("value",e),t.R7$(1),t.JRh(e)}}function ii(a,c){1&a&&(t.j41(0,"mat-error"),t.EFF(1,"Genre is required"),t.k0s())}function ni(a,c){if(1&a&&(t.j41(0,"mat-option",22),t.EFF(1),t.k0s()),2&a){const e=c.$implicit;t.Y8G("value",e),t.R7$(1),t.JRh(e)}}function ai(a,c){if(1&a&&(t.j41(0,"mat-option",22),t.EFF(1),t.k0s()),2&a){const e=c.$implicit;t.Y8G("value",e),t.R7$(1),t.JRh(e)}}function oi(a,c){1&a&&(t.j41(0,"mat-error"),t.EFF(1,"Language is required"),t.k0s())}function ri(a,c){if(1&a&&(t.j41(0,"mat-option",22),t.EFF(1),t.k0s()),2&a){const e=c.$implicit;t.Y8G("value",e),t.R7$(1),t.JRh(e)}}function ci(a,c){if(1&a&&(t.qex(0),t.j41(1,"img",23),t.bIt("click",function(n){return n.stopPropagation()}),t.k0s(),t.bVm()),2&a){const e=t.XpG();t.R7$(1),t.Y8G("src",e.thumbnailPreview,t.B4B)}}function li(a,c){1&a&&(t.j41(0,"p"),t.EFF(1,"Click to upload thumbnail (JPG/PNG, Max 2MB)"),t.k0s())}function si(a,c){if(1&a&&(t.qex(0),t.j41(1,"audio",24),t.bIt("click",function(n){return n.stopPropagation()}),t.k0s(),t.bVm()),2&a){const e=t.XpG();t.R7$(1),t.Y8G("src",e.audioPreview,t.B4B)}}function di(a,c){1&a&&(t.j41(0,"p"),t.EFF(1,"Click to upload audio (MP3/WAV, Max 10MB)"),t.k0s())}function pi(a,c){1&a&&(t.j41(0,"mat-error"),t.EFF(1,"Audio file is required"),t.k0s())}let st=(()=>{class a{constructor(e,n,i,o,r){this.fb=e,this.dialogRef=n,this.data=i,this._snackBar=o,this.masterService=r,this.baseUrl=C.c.server,this.thumbnailPreview=null,this.audioPreview=null,this.musicForm=this.fb.group({title:["",l.k0.required],genre:["",l.k0.required],year:[void 0],language:["",l.k0.required],thumbnail:[null,"CREATE"===this.data.action?l.k0.required:[]],file:[null,"CREATE"===this.data.action?l.k0.required:[]],artist:[void 0],composer:[void 0]}),i.payload&&(this.musicForm.patchValue({title:i.payload?.audioMetadata?.title,genre:i.payload?.audioMetadata?.genre,year:i.payload?.audioMetadata?.year,language:i.payload?.audioMetadata?.language,artist:i.payload?.audioMetadata?.artist,composer:i.payload?.audioMetadata?.composer}),this.thumbnailPreview=this.baseUrl+i.payload?.thumbnail,this.audioPreview=this.baseUrl+i.payload?.url),this.getMetadata()}onThumbnailSelected(e){const n=e.target.files?.[0];if(n){if(!n.type.startsWith("image/"))return void this._snackBar.open("Only image files are allowed","Close",{duration:3e3});if(n.size>2097152)return void this._snackBar.open("Thumbnail max size is 2MB","Close",{duration:3e3});this.musicForm.patchValue({thumbnail:n});const i=new FileReader;i.onload=()=>this.thumbnailPreview=i.result,i.readAsDataURL(n)}}onFileSelected(e){const n=e.target.files?.[0];if(n){if(!n.type.startsWith("audio/"))return void this._snackBar.open("Only audio files are allowed","Close",{duration:3e3});if(n.size>10485760)return void this._snackBar.open("Audio max size is 10MB","Close",{duration:3e3});this.musicForm.patchValue({file:n});const i=new FileReader;i.onload=()=>this.audioPreview=i.result,i.readAsDataURL(n)}}onSubmit(){if(this.musicForm.markAllAsTouched(),this.musicForm.invalid)return void this._snackBar.open("Invalid form","Close",{duration:3e3,panelClass:["style-error"]});const e=new FormData;Object.keys(this.musicForm.value).forEach(n=>{null!==this.musicForm.value[n]&&e.append(n,this.musicForm.value[n])}),"CREATE"===this.data.action?this.createMusic(e):(e.append("id",this.data.payload.id),this.updateMusic(e))}onCancel(){this.dialogRef.close()}createMusic(e){this.masterService.uploadMusicApi(e).subscribe({next:n=>{this._snackBar.open("Music created successfully","Close",{duration:3e3,panelClass:["style-success"]}),this.dialogRef.close(n)},error:n=>{this._snackBar.open(n.error?.message||"Creation failed","Close",{duration:5e3,panelClass:["style-error"]})}})}updateMusic(e){this.masterService.updateMusicApi(this.data.payload.id,e).subscribe({next:n=>{this._snackBar.open("Music updated successfully","Close",{duration:3e3,panelClass:["style-success"]}),this.dialogRef.close(n)},error:n=>{this._snackBar.open(n.error?.message||"Update failed","Close",{duration:5e3,panelClass:["style-error"]})}})}getMetadata(){this.masterService.getMetadataApi().subscribe({next:e=>this.metaData=e,error:e=>console.log(e)})}static{this.\u0275fac=function(n){return new(n||a)(t.rXU(l.ok),t.rXU(s.CP),t.rXU(s.Vh),t.rXU(F.UG),t.rXU(k.m))}}static{this.\u0275cmp=t.VBU({type:a,selectors:[["CoreLab-manage-music"]],decls:50,vars:15,consts:[[1,"dialog-container"],["mat-dialog-title",""],[1,"music-form",3,"formGroup"],["appearance","outline",1,"full-width"],["matInput","","formControlName","title"],[4,"ngIf"],["formControlName","genre"],[3,"value",4,"ngFor","ngForOf"],["formControlName","year"],["formControlName","language"],["formControlName","artist"],[1,"upload-card",3,"click"],["type","file","hidden","","accept","image/*",3,"change"],["thumbnailInput",""],[4,"ngIf","ngIfElse"],["thumbnailPlaceholder",""],["type","file","hidden","","accept","audio/*",3,"change"],["fileInput",""],["audioPlaceholder",""],["align","end"],["mat-button","",3,"click"],["mat-raised-button","","color","primary",3,"click"],[3,"value"],[1,"preview-img",3,"src","click"],["controls","",3,"src","click"]],template:function(n,i){if(1&n){const o=t.RV6();t.j41(0,"div",0)(1,"h1",1),t.EFF(2),t.k0s(),t.j41(3,"mat-dialog-content")(4,"form",2)(5,"mat-form-field",3)(6,"mat-label"),t.EFF(7,"Title"),t.k0s(),t.nrm(8,"input",4),t.DNE(9,ti,2,0,"mat-error",5),t.k0s(),t.j41(10,"mat-form-field",3)(11,"mat-label"),t.EFF(12,"Genre"),t.k0s(),t.j41(13,"mat-select",6),t.DNE(14,ei,2,2,"mat-option",7),t.k0s(),t.DNE(15,ii,2,0,"mat-error",5),t.k0s(),t.j41(16,"mat-form-field",3)(17,"mat-label"),t.EFF(18,"Year"),t.k0s(),t.j41(19,"mat-select",8),t.DNE(20,ni,2,2,"mat-option",7),t.k0s()(),t.j41(21,"mat-form-field",3)(22,"mat-label"),t.EFF(23,"Language"),t.k0s(),t.j41(24,"mat-select",9),t.DNE(25,ai,2,2,"mat-option",7),t.k0s(),t.DNE(26,oi,2,0,"mat-error",5),t.k0s(),t.j41(27,"mat-form-field",3)(28,"mat-label"),t.EFF(29,"Artist"),t.k0s(),t.j41(30,"mat-select",10),t.DNE(31,ri,2,2,"mat-option",7),t.k0s()(),t.j41(32,"div",11),t.bIt("click",function(){t.eBV(o);const d=t.sdS(34);return t.Njj(d.click())}),t.j41(33,"input",12,13),t.bIt("change",function(d){return i.onThumbnailSelected(d)}),t.k0s(),t.DNE(35,ci,2,1,"ng-container",14),t.DNE(36,li,2,0,"ng-template",null,15,t.C5r),t.k0s(),t.j41(38,"div",11),t.bIt("click",function(){t.eBV(o);const d=t.sdS(40);return t.Njj(d.click())}),t.j41(39,"input",16,17),t.bIt("change",function(d){return i.onFileSelected(d)}),t.k0s(),t.DNE(41,si,2,1,"ng-container",14),t.DNE(42,di,2,0,"ng-template",null,18,t.C5r),t.k0s(),t.DNE(44,pi,2,0,"mat-error",5),t.k0s()(),t.j41(45,"mat-dialog-actions",19)(46,"button",20),t.bIt("click",function(){return i.onCancel()}),t.EFF(47,"Cancel"),t.k0s(),t.j41(48,"button",21),t.bIt("click",function(){return i.onSubmit()}),t.EFF(49),t.k0s()()()}if(2&n){const o=t.sdS(37),r=t.sdS(43);let d,u,b,P;t.R7$(2),t.JRh(i.data.title),t.R7$(2),t.Y8G("formGroup",i.musicForm),t.R7$(5),t.Y8G("ngIf",null==(d=i.musicForm.get("title"))?null:d.hasError("required")),t.R7$(5),t.Y8G("ngForOf",null==i.metaData?null:i.metaData.genres),t.R7$(1),t.Y8G("ngIf",null==(u=i.musicForm.get("genre"))?null:u.hasError("required")),t.R7$(5),t.Y8G("ngForOf",null==i.metaData?null:i.metaData.releaseYears),t.R7$(5),t.Y8G("ngForOf",null==i.metaData?null:i.metaData.languages),t.R7$(1),t.Y8G("ngIf",null==(b=i.musicForm.get("language"))?null:b.hasError("required")),t.R7$(5),t.Y8G("ngForOf",null==i.metaData?null:i.metaData.singers),t.R7$(4),t.Y8G("ngIf",i.thumbnailPreview)("ngIfElse",o),t.R7$(6),t.Y8G("ngIf",i.audioPreview)("ngIfElse",r),t.R7$(3),t.Y8G("ngIf",null==(P=i.musicForm.get("file"))?null:P.hasError("required")),t.R7$(5),t.SpI(" ","UPDATE"===i.data.action?"Update":"Create"," ")}},dependencies:[h.Sq,h.bT,x.fg,m.rl,m.nJ,m.TL,g.$z,s.BI,s.Yi,s.E7,f.wT,j.VO,l.qT,l.me,l.BC,l.cb,l.j4,l.JD],styles:[".dialog-container[_ngcontent-%COMP%]   .music-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.dialog-container[_ngcontent-%COMP%]   .upload-card[_ngcontent-%COMP%]{border:2px dashed #9e9e9e;border-radius:8px;padding:20px;text-align:center;cursor:pointer;transition:border-color .3s ease}.dialog-container[_ngcontent-%COMP%]   .upload-card[_ngcontent-%COMP%]:hover{border-color:#3f51b5}.dialog-container[_ngcontent-%COMP%]   .preview-img[_ngcontent-%COMP%]{max-width:100%;max-height:200px;border-radius:8px}.dialog-container[_ngcontent-%COMP%]   audio[_ngcontent-%COMP%]{width:100%;margin-top:8px}"]})}}return a})();const mi=["actionsTemplate"],hi=["firstPosTemplate"],ui=["imageTemplate"];function gi(a,c){if(1&a&&t.EFF(0),2&a){const e=c.index,n=t.XpG();t.SpI(" ",e+1+n.page*n.size,". ")}}function _i(a,c){if(1&a){const e=t.RV6();t.qex(0),t.j41(1,"button",11),t.bIt("click",function(i){return i.stopPropagation()}),t.j41(2,"mat-icon"),t.EFF(3,"more_vert"),t.k0s()(),t.j41(4,"mat-menu",12,13)(6,"button",14),t.bIt("click",function(){const o=t.eBV(e).$implicit,r=t.XpG();return t.Njj(r.openUpdateDialog(o))}),t.j41(7,"mat-icon"),t.EFF(8,"remove_red_eye"),t.k0s(),t.EFF(9," View "),t.k0s(),t.j41(10,"button",14),t.bIt("click",function(){const o=t.eBV(e).$implicit,r=t.XpG();return t.Njj(r.openUpdateDialog(o))}),t.j41(11,"mat-icon"),t.EFF(12,"edit"),t.k0s(),t.EFF(13," Edit "),t.k0s(),t.j41(14,"button",14),t.bIt("click",function(){const o=t.eBV(e).$implicit,r=t.XpG();return t.Njj(r.delete(o))}),t.j41(15,"span",15)(16,"mat-icon"),t.EFF(17,"delete"),t.k0s(),t.j41(18,"span"),t.EFF(19,"Delete"),t.k0s()()()(),t.bVm()}if(2&a){const e=t.sdS(5);t.R7$(1),t.Y8G("matMenuTriggerFor",e)}}function fi(a,c){if(1&a&&t.nrm(0,"img",16),2&a){const e=c.$implicit,n=t.XpG();t.Y8G("src",n.baseUrl+e.thumbnail,t.B4B)}}let vi=(()=>{class a{constructor(e,n,i,o,r,d){this.dialog=e,this.router=n,this.fb=i,this.masterService=o,this._snackBar=r,this.cdRef=d,this.baseUrl=C.c.server,this.columns=[],this.displayedColumns=[],this.page=0,this.size=10,this.pageSizeList=[10,25,50,100,250],this.mediaList=[]}ngOnInit(){this.columns=[{name:"#",property:"pos",visible:!0,alwaysShow:!0},{name:"Image",property:"image",visible:!0,alwaysShow:!0},{name:"Title",property:"title",visible:!0,alwaysShow:!0,valuePath:"audioMetadata.title"},{name:"Genre",property:"genre",visible:!0,alwaysShow:!0,valuePath:"audioMetadata.genre"},{name:"Language",property:"language",visible:!0,alwaysShow:!0,valuePath:"audioMetadata.language"},{name:"Year",property:"year",visible:!0,alwaysShow:!0,valuePath:"audioMetadata.year"},{name:"Artist",property:"artist",visible:!0,alwaysShow:!0,valuePath:"audioMetadata.artist"},{name:"Actions",property:"actions",visible:!0,alwaysShow:!0}],this.displayedColumns=this.columns,this.form=this.fb.group({key:[""],status:["true"],fromDate:[""],toDate:[""]}),this.form.valueChanges.pipe((0,S.B)(400)).subscribe(e=>{this.getAllMedia()}),this.getAllMedia()}onPageChange(e){this.page=e.pageIndex,this.size=e.pageSize,this.getAllMedia()}getAllMedia(){this.masterService.getAllMedia({page:this.page,size:this.size,sort:"id,asc",fileTypes:"AUDIO"}).subscribe({next:n=>{this.recordCount=n.totalElements,this.mediaList=n.content},error:n=>{console.log(n)}})}ngOnChanges(){this.updateDisplayedColumns()}ngAfterViewInit(){setTimeout(()=>{const e={actions:this.actionsTemplate,pos:this.firstPosTemplate,image:this.imageTemplate};this.columns.forEach(n=>{const i=e[n.property];i&&(n.cellTemplate=i)}),this.cdRef.detectChanges()})}clear(){this.form.reset(),this.form.get("status")?.setValue("Active")}updateDisplayedColumns(){this.displayedColumns=this.columns.filter(e=>e.visible)}toggleColumnVisibility(e){e.visible=!e.visible,this.updateDisplayedColumns()}openCreateDialog(){this.dialog.open(st,{data:{action:"CREATE",title:"Music Management",payload:null},width:"800px"}).afterClosed().subscribe(n=>{null!=n&&""!=n&&this.getAllMedia()})}openUpdateDialog(e){this.dialog.open(st,{data:{action:"UPDATE",title:"Music Management",payload:e},width:"800px"}).afterClosed().subscribe(i=>{null!=i&&""!=i&&this.getAllMedia()})}delete(e){console.log("delete row",e),this.dialog.open(A,{width:"400px",data:{title:"Confirm Delete",body:"Are you sure you want to Delete"+e?.audioMetadata?.title,confirmText:"Yes",cancelText:"No"}}).afterClosed().subscribe(i=>{null!=i&&""!=i&&this.masterService.deleteMedia(e.id).subscribe({next:o=>{this._snackBar.open("Mussic deleted successfully.","Close",{duration:5e3}),this.getAllMedia()},error:o=>{console.log(o),this._snackBar.open(o.error.message,"Close",{duration:5e3,panelClass:["style-error"]})}})})}static{this.\u0275fac=function(n){return new(n||a)(t.rXU(s.bZ),t.rXU(O.Ix),t.rXU(l.ok),t.rXU(k.m),t.rXU(F.UG),t.rXU(t.gRc))}}static{this.\u0275cmp=t.VBU({type:a,selectors:[["CoreLab-music"]],viewQuery:function(n,i){if(1&n&&(t.GBs(mi,7),t.GBs(hi,7),t.GBs(ui,7)),2&n){let o;t.mGM(o=t.lsd())&&(i.actionsTemplate=o.first),t.mGM(o=t.lsd())&&(i.firstPosTemplate=o.first),t.mGM(o=t.lsd())&&(i.imageTemplate=o.first)}},features:[t.OA$],decls:21,vars:7,consts:[["mode","card",2,"padding-top","16px"],["fxLayout","row","fxLayoutAlign","space-between center",2,"margin-top","16px"],["fxLayout","row wrap","fxLayoutGap","16px","fxLayoutAlign","start center",1,"filter-container",3,"formGroup"],["appearance","outline","fxFlex.xs","100%","fxFlex.sm","45%","fxFlex.md","30%"],["matInput","","formControlName","key","placeholder","Search..."],["type","button","mat-mini-fab","","color","primary",3,"click"],["firstPosTemplate",""],["actionsTemplate",""],["style","justify-items: center;"],["imageTemplate",""],[3,"columns","data","usePaginator","pageSize","pageSizeOptions","totalRecords","pageChange"],["type","button","mat-icon-button","",3,"matMenuTriggerFor","click"],["yPosition","below","xPosition","before"],["actionsMenu","matMenu"],["mat-menu-item","",3,"click"],["fxLayoutAlign","start center"],["alt","item image","width","50","height","50",2,"border-radius","8px",3,"src"]],template:function(n,i){1&n&&(t.j41(0,"fury-page-layout",0)(1,"fury-page-layout-content")(2,"fury-card-content")(3,"div",1)(4,"form",2)(5,"div")(6,"mat-form-field",3)(7,"mat-label"),t.EFF(8,"Search"),t.k0s(),t.nrm(9,"input",4),t.k0s()()(),t.j41(10,"div")(11,"button",5),t.bIt("click",function(){return i.openCreateDialog()}),t.j41(12,"mat-icon"),t.EFF(13,"add"),t.k0s()()()(),t.DNE(14,gi,1,1,"ng-template",null,6,t.C5r),t.DNE(16,_i,20,1,"ng-template",null,7,t.C5r),t.DNE(18,fi,1,1,"ng-template",8,9,t.C5r),t.j41(20,"shared-data-table",10),t.bIt("pageChange",function(r){return i.onPageChange(r)}),t.k0s()()()()),2&n&&(t.R7$(4),t.Y8G("formGroup",i.form),t.R7$(16),t.Y8G("columns",i.displayedColumns)("data",i.mediaList)("usePaginator",!0)("pageSize",i.size)("pageSizeOptions",i.pageSizeList)("totalRecords",i.recordCount))},dependencies:[x.fg,m.rl,m.nJ,y.An,g.iY,g.$0,v.kk,v.fb,v.Cp,_.DJ,_.BO,_.sA,_.UI,l.qT,l.me,l.BC,l.cb,l.j4,l.JD,$,N,U.cN,z]})}}return a})();var bi=p(5951);function Ci(a,c){1&a&&(t.j41(0,"mat-error"),t.EFF(1,"Question is required"),t.k0s())}function yi(a,c){if(1&a&&(t.j41(0,"mat-option",20),t.EFF(1),t.k0s()),2&a){const e=c.$implicit;t.Y8G("value",e),t.R7$(1),t.JRh(e)}}function wi(a,c){1&a&&(t.j41(0,"mat-error"),t.EFF(1,"Category is required"),t.k0s())}function Mi(a,c){1&a&&(t.j41(0,"mat-error"),t.EFF(1,"Required"),t.k0s())}function ki(a,c){1&a&&(t.j41(0,"mat-icon",26),t.EFF(1," check_circle "),t.k0s())}function xi(a,c){if(1&a){const e=t.RV6();t.j41(0,"div",21)(1,"mat-radio-button",22),t.bIt("change",function(){const o=t.eBV(e).index,r=t.XpG();let d;return t.Njj(null==(d=r.form.get("correctOptionIndex"))?null:d.setValue(o))}),t.k0s(),t.j41(2,"mat-form-field",23)(3,"mat-label"),t.EFF(4),t.k0s(),t.nrm(5,"input",24),t.DNE(6,Mi,2,0,"mat-error",5),t.k0s(),t.DNE(7,ki,2,0,"mat-icon",25),t.k0s()}if(2&a){const e=c.$implicit,n=c.index,i=t.XpG();let o,r;t.R7$(1),t.Y8G("value",n)("checked",(null==(o=i.form.get("correctOptionIndex"))?null:o.value)===n),t.R7$(3),t.SpI("Option ","ABCD"[n],""),t.R7$(1),t.Y8G("formControlName",n),t.R7$(1),t.Y8G("ngIf",e.invalid),t.R7$(1),t.Y8G("ngIf",(null==(r=i.form.get("correctOptionIndex"))?null:r.value)===n)}}function Fi(a,c){1&a&&(t.qex(0),t.j41(1,"mat-icon"),t.EFF(2,"upload_file"),t.k0s(),t.j41(3,"p"),t.EFF(4,"Click to upload audio"),t.k0s(),t.j41(5,"p",27),t.EFF(6,"Allowed: mp3, wav, ogg, mpeg"),t.k0s(),t.j41(7,"p",27),t.EFF(8,"Max size: 20 MB"),t.k0s(),t.bVm())}function Ii(a,c){if(1&a){const e=t.RV6();t.j41(0,"div",28),t.nrm(1,"audio",29),t.j41(2,"button",30),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.triggerFileInput())}),t.EFF(3," Replace File "),t.k0s()()}if(2&a){const e=t.XpG();t.R7$(1),t.Y8G("src",e.audioPreview,t.B4B)}}function Pi(a,c){1&a&&(t.j41(0,"mat-error"),t.EFF(1," Audio is required "),t.k0s())}function Ei(a,c){if(1&a&&(t.j41(0,"div",31)(1,"mat-icon",32),t.EFF(2,"error"),t.k0s(),t.j41(3,"span"),t.EFF(4),t.k0s()()),2&a){const e=t.XpG();t.R7$(4),t.JRh(e.errorMessage)}}let dt=(()=>{class a{constructor(e,n,i,o){this.fb=e,this.dialogRef=n,this.masterService=i,this.data=o,this.baseUrl=C.c.server,this.audioPreview=null,this.categories=[],this.errorMessage=null,this.maxFileSize=20971520,this.allowedTypes=["audio/mpeg","audio/wav","audio/ogg","audio/mp3"];const r=!!o.defaultValues?.id;this.form=this.fb.group({text:[o.defaultValues?.text||"",l.k0.required],category:[o.defaultValues?.category||"",l.k0.required],options:this.fb.array((o.defaultValues?.options||["","","",""]).map(d=>this.fb.control(d,l.k0.required))),correctOptionIndex:[o.defaultValues?.correctOptionIndex??0,l.k0.required],audio:[null,r?[]:[l.k0.required]],existingAudioUrl:[null]}),o.defaultValues?.audio&&(this.audioPreview=this.baseUrl+o.defaultValues.audio?.url,this.form.patchValue({existingAudioUrl:this.audioPreview}))}ngOnInit(){this.getAllCategories()}getAllCategories(){this.masterService.getQuizCategories().subscribe({next:e=>{this.categories=e},error:e=>{console.error(e)}})}get options(){return this.form.get("options")}triggerFileInput(){document.getElementById("audio-input")?.click()}onFileSelected(e){const n=e.target;if(n.files&&n.files[0]){const i=n.files[0];if(!this.allowedTypes.includes(i.type))return this.errorMessage="Invalid file type. Allowed: mp3, wav, ogg, mpeg",void this.resetFile();if(i.size>this.maxFileSize)return this.errorMessage=`File is too large. Max size is ${this.maxFileSize/1048576} MB`,void this.resetFile();this.errorMessage=null,this.form.patchValue({audio:i,existingAudioUrl:null});const o=new FileReader;o.onload=()=>{this.audioPreview=o.result},o.readAsDataURL(i)}}resetFile(){this.form.patchValue({audio:null}),this.audioPreview=this.form.get("existingAudioUrl")?.value||null}submit(){if(this.form.invalid)return;const e=this.form.value,n=new FormData;n.append("text",e.text),n.append("category",e.category),n.append("correctOptionIndex",e.correctOptionIndex.toString()),e.options.forEach((i,o)=>{n.append(`options[${o}]`,i)}),e.audio instanceof File&&n.append("audio",e.audio),this.data.defaultValues?.id?this.masterService.updateQuiz(this.data.defaultValues.id,n).subscribe({next:i=>this.dialogRef.close(i),error:i=>console.error(i)}):this.masterService.createQuiz(n).subscribe({next:i=>this.dialogRef.close(i),error:i=>console.error(i)})}cancel(){this.dialogRef.close()}static{this.\u0275fac=function(n){return new(n||a)(t.rXU(l.ok),t.rXU(s.CP),t.rXU(k.m),t.rXU(s.Vh))}}static{this.\u0275cmp=t.VBU({type:a,selectors:[["CoreLab-manage-question"]],decls:35,vars:12,consts:[["mat-dialog-title",""],[1,"mr-2"],[1,"dialog-content",3,"formGroup"],["appearance","outline",1,"full-width"],["matInput","","formControlName","text","placeholder","Enter your question here"],[4,"ngIf"],["formControlName","category"],[3,"value",4,"ngFor","ngForOf"],["formArrayName","options",1,"options-section"],[1,"section-label"],["class","option-row",4,"ngFor","ngForOf"],[1,"audio-upload"],["id","audio-input","type","file","accept","audio/*","hidden","",3,"change"],[1,"upload-card",3,"click"],[4,"ngIf","ngIfElse"],["previewBlock",""],["class","error-message",4,"ngIf"],["align","end"],["mat-stroked-button","",3,"click"],["mat-raised-button","","color","primary",3,"disabled","click"],[3,"value"],[1,"option-row"],[1,"mr-2",3,"value","checked","change"],["appearance","outline",1,"flex-1"],["matInput","",3,"formControlName"],["color","primary",4,"ngIf"],["color","primary"],[1,"hint"],[1,"preview-block"],["controls","",1,"w-full",3,"src"],["mat-stroked-button","","color","primary","type","button",3,"click"],[1,"error-message"],["color","warn"]],template:function(n,i){if(1&n&&(t.j41(0,"h2",0)(1,"mat-icon",1),t.EFF(2,"help_outline"),t.k0s(),t.EFF(3),t.k0s(),t.j41(4,"mat-dialog-content",2)(5,"mat-form-field",3)(6,"mat-label"),t.EFF(7,"Question"),t.k0s(),t.nrm(8,"input",4),t.DNE(9,Ci,2,0,"mat-error",5),t.k0s(),t.j41(10,"mat-form-field",3)(11,"mat-label"),t.EFF(12,"Category"),t.k0s(),t.j41(13,"mat-select",6),t.DNE(14,yi,2,2,"mat-option",7),t.k0s(),t.DNE(15,wi,2,0,"mat-error",5),t.k0s(),t.j41(16,"div",8)(17,"label",9),t.EFF(18,"Options"),t.k0s(),t.DNE(19,xi,8,6,"div",10),t.k0s(),t.j41(20,"div",11)(21,"label",9),t.EFF(22,"Voice"),t.k0s(),t.j41(23,"input",12),t.bIt("change",function(r){return i.onFileSelected(r)}),t.k0s(),t.j41(24,"div",13),t.bIt("click",function(){return!i.audioPreview&&i.triggerFileInput()}),t.DNE(25,Fi,9,0,"ng-container",14),t.DNE(26,Ii,4,1,"ng-template",null,15,t.C5r),t.k0s(),t.DNE(28,Pi,2,0,"mat-error",5),t.DNE(29,Ei,5,1,"div",16),t.k0s()(),t.j41(30,"mat-dialog-actions",17)(31,"button",18),t.bIt("click",function(){return i.cancel()}),t.EFF(32,"Cancel"),t.k0s(),t.j41(33,"button",19),t.bIt("click",function(){return i.submit()}),t.EFF(34),t.k0s()()),2&n){const o=t.sdS(27);let r,d,u;t.R7$(3),t.SpI(" ",i.data.defaultValues?"Edit Question":"Create New Question","\n"),t.R7$(1),t.Y8G("formGroup",i.form),t.R7$(5),t.Y8G("ngIf",null==(r=i.form.get("text"))?null:r.invalid),t.R7$(5),t.Y8G("ngForOf",i.categories),t.R7$(1),t.Y8G("ngIf",null==(d=i.form.get("category"))?null:d.invalid),t.R7$(4),t.Y8G("ngForOf",i.options.controls),t.R7$(6),t.Y8G("ngIf",!i.audioPreview)("ngIfElse",o),t.R7$(3),t.Y8G("ngIf",(null==(u=i.form.get("audio"))?null:u.hasError("required"))&&(null==(u=i.form.get("audio"))?null:u.touched)),t.R7$(1),t.Y8G("ngIf",i.errorMessage),t.R7$(4),t.Y8G("disabled",i.form.invalid),t.R7$(1),t.SpI(" ",i.data.defaultValues?"Update Question":"Create Question"," ")}},dependencies:[h.Sq,h.bT,x.fg,m.rl,m.nJ,m.TL,y.An,g.$z,s.BI,s.Yi,s.E7,f.wT,j.VO,bi._g,l.me,l.BC,l.cb,l.j4,l.JD,l.v8],styles:[".dialog-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px;max-height:70vh;overflow-y:auto}.full-width[_ngcontent-%COMP%]{width:100%}.options-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.option-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.section-label[_ngcontent-%COMP%]{font-weight:600;margin-bottom:6px;display:block}.audio-upload[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.upload-card[_ngcontent-%COMP%]{border:2px dashed #90caf9;border-radius:8px;padding:20px;text-align:center;cursor:pointer;transition:background .2s ease;color:#555}.upload-card[_ngcontent-%COMP%]:hover{background:#f5faff}.upload-card[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:40px;color:#2196f3;margin-bottom:8px}.upload-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:4px 0}.upload-card[_ngcontent-%COMP%]   .hint[_ngcontent-%COMP%]{font-size:13px;color:#666}.error-message[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;color:#d32f2f;margin-top:4px;font-size:14px}"]})}}return a})();var Ti=p(6038);const Gi=["actionsTemplate"],Oi=["firstPosTemplate"],ji=["optionsTemplate"];function Ri(a,c){if(1&a&&(t.j41(0,"mat-option",15),t.EFF(1),t.k0s()),2&a){const e=c.$implicit;t.Y8G("value",e),t.R7$(1),t.JRh(e)}}function Di(a,c){if(1&a&&t.EFF(0),2&a){const e=c.index,n=t.XpG();t.SpI(" ",e+1+n.page*n.size,". ")}}function Vi(a,c){1&a&&(t.j41(0,"mat-icon",21),t.EFF(1," check_circle "),t.k0s())}const Si=function(a,c){return{"text-primary font-bold":a,"text-gray-700":c}};function Bi(a,c){if(1&a&&(t.j41(0,"div",18)(1,"span",19),t.EFF(2),t.k0s(),t.DNE(3,Vi,2,0,"mat-icon",20),t.k0s()),2&a){const e=c.$implicit,n=c.index,i=t.XpG().$implicit;t.Y8G("ngClass",t.l_i(3,Si,n===i.correctOptionIndex,n!==i.correctOptionIndex)),t.R7$(2),t.JRh(e),t.R7$(1),t.Y8G("ngIf",n===i.correctOptionIndex)}}function Ai(a,c){if(1&a&&(t.j41(0,"div",16),t.DNE(1,Bi,4,6,"div",17),t.k0s()),2&a){const e=c.$implicit;t.R7$(1),t.Y8G("ngForOf",e.options)}}function $i(a,c){if(1&a){const e=t.RV6();t.qex(0),t.j41(1,"button",22),t.bIt("click",function(i){return i.stopPropagation()}),t.j41(2,"mat-icon"),t.EFF(3,"more_vert"),t.k0s()(),t.j41(4,"mat-menu",23,24)(6,"button",25),t.bIt("click",function(){const o=t.eBV(e).$implicit,r=t.XpG();return t.Njj(r.openUpdateDialog(o))}),t.j41(7,"mat-icon"),t.EFF(8,"edit"),t.k0s(),t.EFF(9," Edit "),t.k0s(),t.j41(10,"button",25),t.bIt("click",function(){const o=t.eBV(e).$implicit,r=t.XpG();return t.Njj(r.delete(o))}),t.j41(11,"span",26)(12,"mat-icon"),t.EFF(13,"delete"),t.k0s(),t.j41(14,"span"),t.EFF(15,"Delete"),t.k0s()()()(),t.bVm()}if(2&a){const e=t.sdS(5);t.R7$(1),t.Y8G("matMenuTriggerFor",e)}}function Ni(a,c){if(1&a&&t.nrm(0,"img",27),2&a){const e=c.$implicit,n=t.XpG();t.Y8G("src",n.baseUrl+e.thumbnail,t.B4B)}}let Ui=(()=>{class a{constructor(e,n,i,o,r,d){this.dialog=e,this.router=n,this.fb=i,this.masterService=o,this._snackBar=r,this.cdRef=d,this.baseUrl=C.c.server,this.columns=[],this.displayedColumns=[],this.page=0,this.size=10,this.pageSizeList=[10,25,50,100,250],this.questionList=[],this.categories=[]}ngOnInit(){this.columns=[{name:"#",property:"pos",visible:!0,alwaysShow:!0},{name:"Text",property:"text",visible:!0,alwaysShow:!0,valuePath:"text"},{name:"Category",property:"category",visible:!0,alwaysShow:!0},{name:"Options",property:"options",visible:!0,alwaysShow:!0},{name:"Actions",property:"actions",visible:!0,alwaysShow:!0}],this.displayedColumns=this.columns,this.form=this.fb.group({key:[""],category:[""]}),this.form.valueChanges.pipe((0,S.B)(400)).subscribe(e=>{this.getAllQuestion()}),this.getAllCategories(),this.getAllQuestion()}getAllCategories(){this.masterService.getQuizCategories().subscribe({next:e=>{this.categories=e},error:e=>{console.error(e)}})}onPageChange(e){this.page=e.pageIndex,this.size=e.pageSize,this.getAllQuestion()}getAllQuestion(){let e={page:this.page,size:this.size,sort:"id,asc"};null!=this.form.get("key")?.value&&""!=this.form.get("key")?.value&&(e.key=this.form.get("key")?.value),null!=this.form.get("category")?.value&&""!=this.form.get("category")?.value&&(e.category=this.form.get("category")?.value),this.masterService.getAllQuestionApi(e).subscribe({next:n=>{this.recordCount=n.totalElements,this.questionList=n.content},error:n=>{console.log(n)}})}ngOnChanges(){this.updateDisplayedColumns()}ngAfterViewInit(){setTimeout(()=>{const e={actions:this.actionsTemplate,pos:this.firstPosTemplate,options:this.optionsTemplate};this.columns.forEach(n=>{const i=e[n.property];i&&(n.cellTemplate=i)}),this.cdRef.detectChanges()})}clear(){this.form.reset(),this.form.get("status")?.setValue("Active")}updateDisplayedColumns(){this.displayedColumns=this.columns.filter(e=>e.visible)}toggleColumnVisibility(e){e.visible=!e.visible,this.updateDisplayedColumns()}openCreateDialog(){this.dialog.open(dt,{data:{action:"CREATE",title:"Question Management",defaultValues:null},width:"600px"}).afterClosed().subscribe(n=>{null!=n&&""!=n&&this.getAllQuestion()})}openUpdateDialog(e){this.dialog.open(dt,{data:{action:"UPDATE",title:"Question Management",defaultValues:e},width:"600px"}).afterClosed().subscribe(i=>{null!=i&&""!=i&&this.getAllQuestion()})}delete(e){console.log("delete row",e),this.dialog.open(A,{width:"400px",data:{title:"Confirm Delete",body:"Are you sure you want to Delete "+e.text,confirmText:"Yes",cancelText:"No"}}).afterClosed().subscribe(i=>{null!=i&&""!=i&&this.masterService.deleteQuiz(e.id).subscribe({next:o=>{this._snackBar.open("Question deleted successfully.","Close",{duration:5e3}),this.getAllQuestion()},error:o=>{console.log(o),this._snackBar.open(o.error.message,"Close",{duration:5e3,panelClass:["style-error"]})}})})}static{this.\u0275fac=function(n){return new(n||a)(t.rXU(s.bZ),t.rXU(O.Ix),t.rXU(l.ok),t.rXU(k.m),t.rXU(F.UG),t.rXU(t.gRc))}}static{this.\u0275cmp=t.VBU({type:a,selectors:[["CoreLab-question"]],viewQuery:function(n,i){if(1&n&&(t.GBs(Gi,7),t.GBs(Oi,7),t.GBs(ji,7)),2&n){let o;t.mGM(o=t.lsd())&&(i.actionsTemplate=o.first),t.mGM(o=t.lsd())&&(i.firstPosTemplate=o.first),t.mGM(o=t.lsd())&&(i.optionsTemplate=o.first)}},features:[t.OA$],decls:28,vars:8,consts:[["mode","card",2,"padding-top","16px"],["fxLayout","row","fxLayoutAlign","space-between center",2,"margin-top","16px"],["fxLayout","row wrap","fxLayoutGap","16px","fxLayoutAlign","start center",1,"filter-container",3,"formGroup"],["appearance","outline","fxFlex.xs","100%","fxFlex.sm","45%","fxFlex.md","30%"],["matInput","","formControlName","key","placeholder","Search..."],["appearance","outline",1,"full-width"],["formControlName","category"],[3,"value",4,"ngFor","ngForOf"],["type","button","mat-mini-fab","","color","primary",3,"click"],["firstPosTemplate",""],["optionsTemplate",""],["actionsTemplate",""],["style","justify-items: center;"],["imageTemplate",""],["noDataLabel","No question found",3,"columns","data","usePaginator","pageSize","pageSizeOptions","totalRecords","pageChange"],[3,"value"],[1,"options-list"],["class","flex items-center mb-1",3,"ngClass",4,"ngFor","ngForOf"],[1,"flex","items-center","mb-1",3,"ngClass"],[1,"mr-2"],["color","primary","class","ml-1",4,"ngIf"],["color","primary",1,"ml-1"],["type","button","mat-icon-button","",3,"matMenuTriggerFor","click"],["yPosition","below","xPosition","before"],["actionsMenu","matMenu"],["mat-menu-item","",3,"click"],["fxLayoutAlign","start center"],["alt","item image","width","50","height","50",2,"border-radius","8px",3,"src"]],template:function(n,i){1&n&&(t.j41(0,"fury-page-layout",0)(1,"fury-page-layout-content")(2,"fury-card-content")(3,"div",1)(4,"form",2)(5,"div")(6,"mat-form-field",3)(7,"mat-label"),t.EFF(8,"Search"),t.k0s(),t.nrm(9,"input",4),t.k0s()(),t.j41(10,"mat-form-field",5)(11,"mat-label"),t.EFF(12,"Category"),t.k0s(),t.j41(13,"mat-select",6),t.DNE(14,Ri,2,2,"mat-option",7),t.k0s()()(),t.j41(15,"div")(16,"button",8),t.bIt("click",function(){return i.openCreateDialog()}),t.j41(17,"mat-icon"),t.EFF(18,"add"),t.k0s()()()(),t.DNE(19,Di,1,1,"ng-template",null,9,t.C5r),t.DNE(21,Ai,2,1,"ng-template",null,10,t.C5r),t.DNE(23,$i,16,1,"ng-template",null,11,t.C5r),t.DNE(25,Ni,1,1,"ng-template",12,13,t.C5r),t.j41(27,"shared-data-table",14),t.bIt("pageChange",function(r){return i.onPageChange(r)}),t.k0s()()()()),2&n&&(t.R7$(4),t.Y8G("formGroup",i.form),t.R7$(10),t.Y8G("ngForOf",i.categories),t.R7$(13),t.Y8G("columns",i.displayedColumns)("data",i.questionList)("usePaginator",!0)("pageSize",i.size)("pageSizeOptions",i.pageSizeList)("totalRecords",i.recordCount))},dependencies:[h.YU,h.Sq,h.bT,x.fg,m.rl,m.nJ,y.An,g.iY,g.$0,v.kk,v.fb,v.Cp,f.wT,j.VO,_.DJ,_.BO,_.sA,_.UI,Ti.PW,l.qT,l.me,l.BC,l.cb,l.j4,l.JD,$,N,U.cN,z]})}}return a})();const zi=["thumbnailInput"],Xi=["fileInput"];function Yi(a,c){1&a&&(t.j41(0,"mat-error"),t.EFF(1," Caption cannot exceed 200 characters "),t.k0s())}function Li(a,c){if(1&a){const e=t.RV6();t.j41(0,"div",21),t.bIt("click",function(){t.eBV(e),t.XpG();const i=t.sdS(24);return t.Njj(i.click())}),t.j41(1,"mat-icon",22),t.EFF(2,"cloud_upload"),t.k0s(),t.j41(3,"p"),t.EFF(4,"Click to upload thumbnail"),t.k0s(),t.j41(5,"p",23),t.EFF(6,"Max size: 2MB \u2022 Formats: JPG, PNG, WebP"),t.k0s()()}}function Qi(a,c){if(1&a){const e=t.RV6();t.j41(0,"div",24),t.nrm(1,"img",25),t.j41(2,"div",26)(3,"button",27),t.bIt("click",function(){t.eBV(e),t.XpG();const i=t.sdS(24);return t.Njj(i.click())}),t.j41(4,"mat-icon"),t.EFF(5,"edit"),t.k0s()(),t.j41(6,"button",28),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.removeThumbnail())}),t.j41(7,"mat-icon"),t.EFF(8,"delete"),t.k0s()()()()}if(2&a){const e=t.XpG();let n;t.R7$(1),t.Y8G("src",e.thumbnailPreview||(null==(n=e.form.get("thumbnail"))?null:n.value),t.B4B)}}function Ji(a,c){1&a&&(t.j41(0,"mat-error"),t.EFF(1," Thumbnail size must be less than 2MB "),t.k0s())}function qi(a,c){1&a&&(t.j41(0,"mat-error"),t.EFF(1," Only JPG, PNG, and WebP formats are allowed for thumbnails "),t.k0s())}function Hi(a,c){if(1&a){const e=t.RV6();t.j41(0,"div",21),t.bIt("click",function(){t.eBV(e),t.XpG();const i=t.sdS(34);return t.Njj(i.click())}),t.j41(1,"mat-icon",22),t.EFF(2,"cloud_upload"),t.k0s(),t.j41(3,"p"),t.EFF(4,"Click to upload main file"),t.k0s(),t.j41(5,"p",23),t.EFF(6,"Max size: 10MB \u2022 Formats: mp4,ogg,webm"),t.k0s()()}}function Ki(a,c){if(1&a&&t.nrm(0,"video",34),2&a){const e=t.XpG(2);let n;t.Y8G("src",e.filePreview||(null==(n=e.form.get("file"))?null:n.value),t.B4B)}}function Wi(a,c){if(1&a){const e=t.RV6();t.j41(0,"div",24)(1,"div",29),t.DNE(2,Ki,1,1,"video",30),t.j41(3,"p",31),t.EFF(4),t.k0s()(),t.j41(5,"div",26)(6,"button",32),t.bIt("click",function(){t.eBV(e),t.XpG();const i=t.sdS(34);return t.Njj(i.click())}),t.j41(7,"mat-icon"),t.EFF(8,"edit"),t.k0s()(),t.j41(9,"button",33),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.removeFile())}),t.j41(10,"mat-icon"),t.EFF(11,"delete"),t.k0s()()()()}if(2&a){const e=t.XpG();let n,i;t.R7$(2),t.Y8G("ngIf",null==(n=e.form.get("file"))?null:n.value),t.R7$(2),t.JRh(e.getFileName(null==(i=e.form.get("file"))?null:i.value))}}function Zi(a,c){1&a&&(t.j41(0,"mat-error"),t.EFF(1," File size must be less than 50MB "),t.k0s())}function tn(a,c){1&a&&(t.j41(0,"mat-error"),t.EFF(1," Only mp4, ogg, webm, formats are allowed "),t.k0s())}let pt=(()=>{class a{constructor(e,n,i,o,r){this.fb=e,this.dialogRef=n,this.data=i,this._snackBar=o,this.masterService=r,this.thumbnailPreview=null,this.filePreview=null,this.form=this.fb.group({caption:["",[l.k0.maxLength(200)]],thumbnail:[null],category:[null],file:[null]})}ngOnInit(){"UPDATE"===this.data?.action&&this.data.payload&&(this.form.patchValue({caption:this.data.payload?.videoMetadata?.caption||"",category:this.data.payload?.videoMetadata?.category||""}),this.data.payload.thumbnail&&this.form.get("thumbnail")?.setValue(C.c.server+this.data.payload.thumbnail),this.data.payload.url&&this.form.get("file")?.setValue(C.c.server+this.data.payload.url))}onThumbnailSelected(e){const n=e.target.files[0];if(!n)return;if(!["image/jpeg","image/png","image/webp"].includes(n.type))return void this.form.get("thumbnail")?.setErrors({fileType:!0});if(n.size>2097152)return void this.form.get("thumbnail")?.setErrors({fileSize:!0});this.form.get("thumbnail")?.setErrors(null);const o=new FileReader;o.onload=()=>{this.thumbnailPreview=o.result,this.form.get("thumbnail")?.setValue(n)},o.readAsDataURL(n)}onFileSelected(e){const n=e.target.files[0];n&&(["video/mp4","video/webm","video/ogg"].includes(n.type)?n.size>52428800?this.form.get("file")?.setErrors({fileSize:!0}):(this.form.get("file")?.setErrors(null),this.filePreview=null,this.form.get("file")?.setValue(n)):this.form.get("file")?.setErrors({fileType:!0}))}isImageFile(e){return e instanceof File?e.type.startsWith("image/"):"string"==typeof e&&/\.(jpg|jpeg|png|webp)$/i.test(e)}getFileName(e){return e instanceof File?e.name:"string"==typeof e&&e.split("/").pop()||"File"}removeThumbnail(){this.thumbnailPreview=null,this.form.get("thumbnail")?.setValue(null),this.form.get("thumbnail")?.setErrors(null)}removeFile(){this.filePreview=null,this.form.get("file")?.setValue(null),this.form.get("file")?.setErrors(null)}onCancel(){this.dialogRef.close()}onSubmit(){if(this.form.invalid)return void this.form.markAllAsTouched();const e=new FormData;e.append("caption",this.form.value.caption||""),e.append("category",this.form.value.category||""),this.form.value.thumbnail instanceof File?e.append("thumbnail",this.form.value.thumbnail):this.form.value.thumbnail&&e.append("thumbnailUrl",this.form.value.thumbnail),this.form.value.file instanceof File?e.append("file",this.form.value.file):this.form.value.file&&e.append("fileUrl",this.form.value.file),"UPDATE"===this.data.action?(e.append("id",this.data.payload.id),this.updateGalleryVideo(e)):this.createGalleryVideo(e)}createGalleryVideo(e){this.masterService.uploadVideo(e).subscribe({next:n=>{this._snackBar.open("Gallery video item created successfully","Close",{duration:3e3,panelClass:["style-success"]}),this.dialogRef.close(n)},error:n=>{this._snackBar.open(n.error.message||"Creation failed","Close",{duration:5e3,panelClass:["style-error"]})}})}updateGalleryVideo(e){this.masterService.updateVideo(this.data.payload.id,e).subscribe({next:n=>{this._snackBar.open("Gallery video item updated successfully","Close",{duration:3e3,panelClass:["style-success"]}),this.dialogRef.close(n)},error:n=>{this._snackBar.open(n?.error?.message,"Close",{duration:5e3,panelClass:["style-error"]}),this.dialogRef.close(this.data)}})}static{this.\u0275fac=function(n){return new(n||a)(t.rXU(l.ok),t.rXU(s.CP),t.rXU(s.Vh),t.rXU(F.UG),t.rXU(k.m))}}static{this.\u0275cmp=t.VBU({type:a,selectors:[["CoreLab-manage-music-video"]],viewQuery:function(n,i){if(1&n&&(t.GBs(zi,5),t.GBs(Xi,5)),2&n){let o;t.mGM(o=t.lsd())&&(i.thumbnailInput=o.first),t.mGM(o=t.lsd())&&(i.fileInput=o.first)}},decls:43,vars:13,consts:[["mat-dialog-title","",1,"dialog-title"],["fxLayout","column","mat-dialog-content","",1,"dialog-body",3,"formGroup","ngSubmit"],["appearance","outline",1,"full-width"],["formControlName","category"],["value","Timeline"],["value","Movie"],["appearance","outline","fxFlex","1 1 100%"],["matInput","","formControlName","caption","placeholder","Enter image caption","rows","3"],[4,"ngIf"],["fxFlex","1 1 100%","fxLayout","column"],[1,"section-label"],["fxLayout","column",1,"file-upload-container"],["class","upload-area",3,"click",4,"ngIf"],["class","preview-area",4,"ngIf"],["type","file","accept","image/jpeg,image/png,image/webp",2,"display","none",3,"change"],["thumbnailInput",""],["type","file","accept","video/mp4,video/ogg,video/webm",2,"display","none",3,"change"],["fileInput",""],["align","end",1,"dialog-actions"],["mat-stroked-button","","color","basic",3,"click"],["mat-flat-button","","color","primary","type","submit",3,"disabled","click"],[1,"upload-area",3,"click"],[1,"upload-icon"],[1,"file-info"],[1,"preview-area"],["alt","Thumbnail preview",1,"thumbnail-preview",3,"src"],[1,"preview-actions"],["mat-icon-button","","color","primary","matTooltip","Change thumbnail",3,"click"],["mat-icon-button","","color","warn","matTooltip","Remove thumbnail",3,"click"],[1,"video-preview-container"],["controls","","width","100%",3,"src",4,"ngIf"],[1,"file-name"],["mat-icon-button","","color","primary","matTooltip","Change file",3,"click"],["mat-icon-button","","color","warn","matTooltip","Remove file",3,"click"],["controls","","width","100%",3,"src"]],template:function(n,i){if(1&n&&(t.j41(0,"h2",0),t.EFF(1),t.k0s(),t.nrm(2,"mat-divider"),t.j41(3,"form",1),t.bIt("ngSubmit",function(){return i.onSubmit()}),t.j41(4,"mat-form-field",2)(5,"mat-label"),t.EFF(6,"Category"),t.k0s(),t.j41(7,"mat-select",3)(8,"mat-option",4),t.EFF(9,"Timeline"),t.k0s(),t.j41(10,"mat-option",5),t.EFF(11,"Movie"),t.k0s()()(),t.j41(12,"mat-form-field",6)(13,"mat-label"),t.EFF(14,"Caption"),t.k0s(),t.nrm(15,"textarea",7),t.DNE(16,Yi,2,0,"mat-error",8),t.k0s(),t.j41(17,"div",9)(18,"label",10),t.EFF(19,"Thumbnail"),t.k0s(),t.j41(20,"div",11),t.DNE(21,Li,7,0,"div",12),t.DNE(22,Qi,9,1,"div",13),t.j41(23,"input",14,15),t.bIt("change",function(r){return i.onThumbnailSelected(r)}),t.k0s(),t.DNE(25,Ji,2,0,"mat-error",8),t.DNE(26,qi,2,0,"mat-error",8),t.k0s()(),t.j41(27,"div",9)(28,"label",10),t.EFF(29,"Main File"),t.k0s(),t.j41(30,"div",11),t.DNE(31,Hi,7,0,"div",12),t.DNE(32,Wi,12,2,"div",13),t.j41(33,"input",16,17),t.bIt("change",function(r){return i.onFileSelected(r)}),t.k0s(),t.DNE(35,Zi,2,0,"mat-error",8),t.DNE(36,tn,2,0,"mat-error",8),t.k0s()()(),t.nrm(37,"mat-divider"),t.j41(38,"mat-dialog-actions",18)(39,"button",19),t.bIt("click",function(){return i.onCancel()}),t.EFF(40,"Cancel"),t.k0s(),t.j41(41,"button",20),t.bIt("click",function(){return i.onSubmit()}),t.EFF(42),t.k0s()()),2&n){let o,r,d,u,b,P,T,G,X;t.R7$(1),t.SpI(" ",i.data.title,"\n"),t.R7$(2),t.Y8G("formGroup",i.form),t.R7$(13),t.Y8G("ngIf",null==(o=i.form.get("caption"))?null:o.hasError("maxlength")),t.R7$(5),t.Y8G("ngIf",!(i.thumbnailPreview||null!=(r=i.form.get("thumbnail"))&&r.value)),t.R7$(1),t.Y8G("ngIf",i.thumbnailPreview||(null==(d=i.form.get("thumbnail"))?null:d.value)),t.R7$(3),t.Y8G("ngIf",null==(u=i.form.get("thumbnail"))?null:u.hasError("fileSize")),t.R7$(1),t.Y8G("ngIf",null==(b=i.form.get("thumbnail"))?null:b.hasError("fileType")),t.R7$(5),t.Y8G("ngIf",!(i.filePreview||null!=(P=i.form.get("file"))&&P.value)),t.R7$(1),t.Y8G("ngIf",null==(T=i.form.get("file"))?null:T.value),t.R7$(3),t.Y8G("ngIf",null==(G=i.form.get("file"))?null:G.hasError("fileSize")),t.R7$(1),t.Y8G("ngIf",null==(X=i.form.get("file"))?null:X.hasError("fileType")),t.R7$(5),t.Y8G("disabled",i.form.invalid),t.R7$(1),t.SpI(" ","UPDATE"===i.data.action?"Save Changes":"Create"," ")}},dependencies:[h.bT,x.fg,m.rl,m.nJ,m.TL,y.An,B.q,g.$z,g.iY,s.BI,s.Yi,s.E7,ot.oV,f.wT,j.VO,_.DJ,_.UI,l.qT,l.me,l.BC,l.cb,l.j4,l.JD],styles:[".dialog-title[_ngcontent-%COMP%]{font-weight:500;margin:0}.dialog-body[_ngcontent-%COMP%]{padding:20px;min-height:400px}.section-label[_ngcontent-%COMP%]{font-size:14px;margin-bottom:8px;color:#0009;font-weight:500}.file-upload-container[_ngcontent-%COMP%]{margin-bottom:24px}.upload-area[_ngcontent-%COMP%]{border:2px dashed #ccc;border-radius:4px;padding:20px;text-align:center;transition:all .3s;margin-bottom:16px}.upload-area[_ngcontent-%COMP%]:hover{border-color:#3f51b5;background-color:#3f51b50a;cursor:pointer}.upload-area[_ngcontent-%COMP%]   .upload-icon[_ngcontent-%COMP%]{font-size:48px;width:48px;height:48px;color:#ccc;margin-bottom:8px}.upload-area[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#0009}.upload-area[_ngcontent-%COMP%]   .file-info[_ngcontent-%COMP%]{font-size:12px;margin-top:4px}.preview-area[_ngcontent-%COMP%]{position:relative;margin-bottom:16px}.preview-area[_ngcontent-%COMP%]   .thumbnail-preview[_ngcontent-%COMP%], .preview-area[_ngcontent-%COMP%]   .file-preview[_ngcontent-%COMP%]{width:100%;max-height:200px;object-fit:contain;border-radius:4px;border:1px solid #eee}.preview-area[_ngcontent-%COMP%]   .file-info-preview[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:20px;border:1px solid #eee;border-radius:4px}.preview-area[_ngcontent-%COMP%]   .file-info-preview[_ngcontent-%COMP%]   .file-icon[_ngcontent-%COMP%]{font-size:48px;width:48px;height:48px;color:#757575;margin-bottom:8px}.preview-area[_ngcontent-%COMP%]   .file-info-preview[_ngcontent-%COMP%]   .file-name[_ngcontent-%COMP%]{margin:0;font-size:14px;color:#000000de;word-break:break-all;text-align:center}.preview-area[_ngcontent-%COMP%]   .preview-actions[_ngcontent-%COMP%]{position:absolute;bottom:8px;right:8px;background:rgba(255,255,255,.8);border-radius:4px;padding:4px}.dialog-actions[_ngcontent-%COMP%]{padding:16px;margin:0}"]})}}return a})();function en(a,c){1&a&&t.nrm(0,"mat-progress-spinner",10)}function nn(a,c){if(1&a){const e=t.RV6();t.j41(0,"div",7),t.DNE(1,en,1,0,"mat-progress-spinner",8),t.j41(2,"img",9),t.bIt("load",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.imageLoaded=!0)})("error",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.imageLoaded=!0)}),t.k0s()()}if(2&a){const e=t.XpG();t.R7$(1),t.Y8G("ngIf",!e.imageLoaded),t.R7$(1),t.AVh("hidden",!e.imageLoaded),t.Y8G("src",e.data.fileUrl,t.B4B)}}function an(a,c){1&a&&t.nrm(0,"mat-progress-spinner",10)}function on(a,c){if(1&a){const e=t.RV6();t.j41(0,"div",7),t.DNE(1,an,1,0,"mat-progress-spinner",8),t.j41(2,"video",11),t.bIt("loadeddata",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.videoLoaded=!0)})("error",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.videoLoaded=!0)}),t.k0s()()}if(2&a){const e=t.XpG();t.R7$(1),t.Y8G("ngIf",!e.videoLoaded),t.R7$(1),t.AVh("hidden",!e.videoLoaded),t.Y8G("src",e.data.fileUrl,t.B4B)}}function rn(a,c){1&a&&t.nrm(0,"mat-progress-spinner",10)}function cn(a,c){if(1&a){const e=t.RV6();t.j41(0,"div",7),t.DNE(1,rn,1,0,"mat-progress-spinner",8),t.j41(2,"div",12)(3,"mat-icon",13),t.EFF(4,"audiotrack"),t.k0s(),t.j41(5,"audio",14),t.bIt("loadedmetadata",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.audioLoaded=!0)})("error",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.audioLoaded=!0)}),t.k0s()()()}if(2&a){const e=t.XpG();t.R7$(1),t.Y8G("ngIf",!e.audioLoaded),t.R7$(1),t.AVh("hidden",!e.audioLoaded),t.R7$(3),t.Y8G("src",e.data.fileUrl,t.B4B)}}let ln=(()=>{class a{constructor(e,n){this.dialogRef=e,this.data=n,this.imageLoaded=!1,this.videoLoaded=!1,this.audioLoaded=!1}close(){this.dialogRef.close()}static{this.\u0275fac=function(n){return new(n||a)(t.rXU(s.CP),t.rXU(s.Vh))}}static{this.\u0275cmp=t.VBU({type:a,selectors:[["CoreLab-view-video-dailog"]],decls:11,vars:4,consts:[[1,"dialog-container"],[1,"media-card","mat-elevation-z6"],[1,"media-title"],[1,"media-wrapper"],["class","media-loader",4,"ngIf"],["align","end",1,"dialog-actions"],["mat-stroked-button","","color","primary",3,"click"],[1,"media-loader"],["mode","indeterminate","diameter","40","class","spinner",4,"ngIf"],["alt","Preview",1,"media-image",3,"src","load","error"],["mode","indeterminate","diameter","40",1,"spinner"],["controls","",1,"media-video",3,"src","loadeddata","error"],[1,"audio-wrapper"],[1,"audio-icon"],["controls","",1,"media-audio",3,"src","loadedmetadata","error"]],template:function(n,i){1&n&&(t.j41(0,"mat-dialog-content",0)(1,"mat-card",1)(2,"h2",2),t.EFF(3),t.k0s(),t.j41(4,"div",3),t.DNE(5,nn,3,4,"div",4),t.DNE(6,on,3,4,"div",4),t.DNE(7,cn,6,4,"div",4),t.k0s()()(),t.j41(8,"mat-dialog-actions",5)(9,"button",6),t.bIt("click",function(){return i.close()}),t.EFF(10,"Close"),t.k0s()()),2&n&&(t.R7$(3),t.JRh(i.data.title),t.R7$(2),t.Y8G("ngIf","image"===i.data.fileType),t.R7$(1),t.Y8G("ngIf","video"===i.data.fileType),t.R7$(1),t.Y8G("ngIf","audio"===i.data.fileType))},dependencies:[h.bT,y.An,g.$z,s.Yi,s.E7,R.RN,ct.LG],styles:[".dialog-container[_ngcontent-%COMP%]{padding:0!important;margin:0}.media-card[_ngcontent-%COMP%]{width:100%;height:100%;border-radius:0;box-shadow:none}.media-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;background:#000}.media-wrapper[_ngcontent-%COMP%]   .media-image[_ngcontent-%COMP%], .media-wrapper[_ngcontent-%COMP%]   .media-video[_ngcontent-%COMP%]{width:100%;max-height:60vh;object-fit:cover}.media-info[_ngcontent-%COMP%]{padding:20px}.media-info[_ngcontent-%COMP%]   .media-title[_ngcontent-%COMP%]{font-size:22px;font-weight:600;margin-bottom:8px;color:#1f2937}.media-info[_ngcontent-%COMP%]   .media-caption[_ngcontent-%COMP%]{font-size:15px;line-height:1.5;color:#6b7280;margin-bottom:12px}.media-info[_ngcontent-%COMP%]   mat-chip[_ngcontent-%COMP%]{font-size:13px;border-radius:16px;font-weight:500}.dialog-actions[_ngcontent-%COMP%]{padding:12px 24px;border-top:1px solid #e5e7eb}.media-wrapper[_ngcontent-%COMP%]{position:relative;display:flex;justify-content:center;align-items:center;background:#000;min-height:200px}.media-wrapper[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{position:absolute;z-index:2;color:#3f51b5}.media-wrapper[_ngcontent-%COMP%]   .media-image[_ngcontent-%COMP%], .media-wrapper[_ngcontent-%COMP%]   .media-video[_ngcontent-%COMP%]{width:100%;max-height:60vh;object-fit:cover;border-radius:4px}.media-wrapper[_ngcontent-%COMP%]   .audio-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;padding:16px;background:#fafafa;width:100%}.media-wrapper[_ngcontent-%COMP%]   .audio-wrapper[_ngcontent-%COMP%]   .audio-icon[_ngcontent-%COMP%]{margin-right:12px;color:#3f51b5}.media-wrapper[_ngcontent-%COMP%]   .audio-wrapper[_ngcontent-%COMP%]   .media-audio[_ngcontent-%COMP%]{flex:1}.media-wrapper[_ngcontent-%COMP%]   .hidden[_ngcontent-%COMP%]{display:none}"]})}}return a})();const sn=["actionsTemplate"],dn=["firstPosTemplate"],pn=["imageTemplate"];function mn(a,c){if(1&a&&t.EFF(0),2&a){const e=c.index,n=t.XpG();t.SpI(" ",e+1+n.page*n.size,". ")}}function hn(a,c){if(1&a){const e=t.RV6();t.qex(0),t.j41(1,"button",15),t.bIt("click",function(i){return i.stopPropagation()}),t.j41(2,"mat-icon"),t.EFF(3,"more_vert"),t.k0s()(),t.j41(4,"mat-menu",16,17)(6,"button",18),t.bIt("click",function(){const o=t.eBV(e).$implicit,r=t.XpG();return t.Njj(r.openPreview(o))}),t.j41(7,"mat-icon"),t.EFF(8,"remove_red_eye"),t.k0s(),t.EFF(9," View "),t.k0s(),t.j41(10,"button",18),t.bIt("click",function(){const o=t.eBV(e).$implicit,r=t.XpG();return t.Njj(r.openUpdateDialog(o))}),t.j41(11,"mat-icon"),t.EFF(12,"edit"),t.k0s(),t.EFF(13," Edit "),t.k0s(),t.j41(14,"button",18),t.bIt("click",function(){const o=t.eBV(e).$implicit,r=t.XpG();return t.Njj(r.delete(o))}),t.j41(15,"span",19)(16,"mat-icon"),t.EFF(17,"delete"),t.k0s(),t.j41(18,"span"),t.EFF(19,"Delete"),t.k0s()()()(),t.bVm()}if(2&a){const e=t.sdS(5);t.R7$(1),t.Y8G("matMenuTriggerFor",e)}}function un(a,c){if(1&a&&t.nrm(0,"img",20),2&a){const e=c.$implicit,n=t.XpG();t.Y8G("src",n.baseUrl+e.thumbnail,t.B4B)}}const gn=[{path:"gallery",component:ce,data:{breadcrumb:"Gallery"}},{path:"casts",component:Ze,data:{breadcrumb:"Casts"}},{path:"music",component:vi,data:{breadcrumb:"Music"}},{path:"music-video",component:(()=>{class a{constructor(e,n,i,o,r,d){this.dialog=e,this.router=n,this.fb=i,this.masterService=o,this._snackBar=r,this.cdRef=d,this.baseUrl=C.c.server,this.columns=[],this.displayedColumns=[],this.page=0,this.size=10,this.pageSizeList=[10,25,50,100,250],this.mediaList=[]}ngOnInit(){this.columns=[{name:"#",property:"pos",visible:!0,alwaysShow:!0},{name:"Image",property:"image",visible:!0,alwaysShow:!0},{name:"Caption",property:"caption",visible:!0,alwaysShow:!0,valuePath:"imageMetadata.caption"},{name:"Category",property:"category",visible:!0,alwaysShow:!0,valuePath:"imageMetadata.category"},{name:"Actions",property:"actions",visible:!0,alwaysShow:!0}],this.displayedColumns=this.columns,this.form=this.fb.group({key:[""],category:[""]}),this.form.valueChanges.pipe((0,S.B)(400)).subscribe(e=>{this.getAllMedia()}),this.getAllMedia()}onPageChange(e){this.page=e.pageIndex,this.size=e.pageSize,this.getAllMedia()}getAllMedia(){let e={page:this.page,size:this.size,sort:"id,asc",fileTypes:"VIDEO"};null!=this.form.get("key")?.value&&""!=this.form.get("key")?.value&&(e.key=this.form.get("key")?.value),null!=this.form.get("category")?.value&&""!=this.form.get("category")?.value&&(e.categories=this.form.get("category")?.value),this.masterService.getAllMedia(e).subscribe({next:n=>{this.recordCount=n.totalElements,this.mediaList=n.content},error:n=>{console.log(n)}})}ngOnChanges(){this.updateDisplayedColumns()}ngAfterViewInit(){setTimeout(()=>{const e={actions:this.actionsTemplate,pos:this.firstPosTemplate,image:this.imageTemplate};this.columns.forEach(n=>{const i=e[n.property];i&&(n.cellTemplate=i)}),this.cdRef.detectChanges()})}clear(){this.form.reset(),this.form.get("status")?.setValue("Active")}updateDisplayedColumns(){this.displayedColumns=this.columns.filter(e=>e.visible)}toggleColumnVisibility(e){e.visible=!e.visible,this.updateDisplayedColumns()}openCreateDialog(){this.dialog.open(pt,{data:{action:"CREATE",title:"Video Management",payload:null},width:"600px"}).afterClosed().subscribe(n=>{null!=n&&""!=n&&this.getAllMedia()})}openUpdateDialog(e){this.dialog.open(pt,{data:{action:"UPDATE",title:"Video Management",payload:e},width:"600px"}).afterClosed().subscribe(i=>{null!=i&&""!=i&&this.getAllMedia()})}delete(e){console.log("delete row",e),this.dialog.open(A,{width:"400px",data:{title:"Confirm Delete",body:"Are you sure you want to Delete"+e.videoMetadata.caption,confirmText:"Yes",cancelText:"No"}}).afterClosed().subscribe(i=>{null!=i&&""!=i&&this.masterService.deleteMedia(e.id).subscribe({next:o=>{this._snackBar.open("Media deleted successfully.","Close",{duration:5e3}),this.getAllMedia()},error:o=>{console.log(o),this._snackBar.open(o.error.message,"Close",{duration:5e3,panelClass:["style-error"]})}})})}openPreview(e){this.dialog.open(ln,{data:{title:e?.videoMetadata?.caption,fileUrl:this.baseUrl+e?.url,fileType:"video"},width:"600px",panelClass:"custom-dialog-container"})}static{this.\u0275fac=function(n){return new(n||a)(t.rXU(s.bZ),t.rXU(O.Ix),t.rXU(l.ok),t.rXU(k.m),t.rXU(F.UG),t.rXU(t.gRc))}}static{this.\u0275cmp=t.VBU({type:a,selectors:[["CoreLab-music-video"]],viewQuery:function(n,i){if(1&n&&(t.GBs(sn,7),t.GBs(dn,7),t.GBs(pn,7)),2&n){let o;t.mGM(o=t.lsd())&&(i.actionsTemplate=o.first),t.mGM(o=t.lsd())&&(i.firstPosTemplate=o.first),t.mGM(o=t.lsd())&&(i.imageTemplate=o.first)}},features:[t.OA$],decls:29,vars:7,consts:[["mode","card",2,"padding-top","16px"],["fxLayout","row","fxLayoutAlign","space-between center",2,"margin-top","16px"],["fxLayout","row wrap","fxLayoutGap","16px","fxLayoutAlign","start center",1,"filter-container",3,"formGroup"],["appearance","outline","fxFlex.xs","100%","fxFlex.sm","45%","fxFlex.md","30%"],["matInput","","formControlName","key","placeholder","Search..."],["appearance","outline",1,"full-width"],["formControlName","category"],["value","Timeline"],["value","Movie"],["type","button","mat-mini-fab","","color","primary",3,"click"],["firstPosTemplate",""],["actionsTemplate",""],["style","justify-items: center;"],["imageTemplate",""],["noDataLabel","No Gallery video found",3,"columns","data","usePaginator","pageSize","pageSizeOptions","totalRecords","pageChange"],["type","button","mat-icon-button","",3,"matMenuTriggerFor","click"],["yPosition","below","xPosition","before"],["actionsMenu","matMenu"],["mat-menu-item","",3,"click"],["fxLayoutAlign","start center"],["alt","item image","width","50","height","50",2,"border-radius","8px",3,"src"]],template:function(n,i){1&n&&(t.j41(0,"fury-page-layout",0)(1,"fury-page-layout-content")(2,"fury-card-content")(3,"div",1)(4,"form",2)(5,"div")(6,"mat-form-field",3)(7,"mat-label"),t.EFF(8,"Search"),t.k0s(),t.nrm(9,"input",4),t.k0s()(),t.j41(10,"mat-form-field",5)(11,"mat-label"),t.EFF(12,"Category"),t.k0s(),t.j41(13,"mat-select",6)(14,"mat-option",7),t.EFF(15,"Timeline"),t.k0s(),t.j41(16,"mat-option",8),t.EFF(17,"Movie"),t.k0s()()()(),t.j41(18,"div")(19,"button",9),t.bIt("click",function(){return i.openCreateDialog()}),t.j41(20,"mat-icon"),t.EFF(21,"add"),t.k0s()()()(),t.DNE(22,mn,1,1,"ng-template",null,10,t.C5r),t.DNE(24,hn,20,1,"ng-template",null,11,t.C5r),t.DNE(26,un,1,1,"ng-template",12,13,t.C5r),t.j41(28,"shared-data-table",14),t.bIt("pageChange",function(r){return i.onPageChange(r)}),t.k0s()()()()),2&n&&(t.R7$(4),t.Y8G("formGroup",i.form),t.R7$(24),t.Y8G("columns",i.displayedColumns)("data",i.mediaList)("usePaginator",!0)("pageSize",i.size)("pageSizeOptions",i.pageSizeList)("totalRecords",i.recordCount))},dependencies:[x.fg,m.rl,m.nJ,y.An,g.iY,g.$0,v.kk,v.fb,v.Cp,f.wT,j.VO,_.DJ,_.BO,_.sA,_.UI,l.qT,l.me,l.BC,l.cb,l.j4,l.JD,$,N,U.cN,z]})}}return a})(),data:{breadcrumb:"Music Video"}},{path:"question",component:Ui,data:{breadcrumb:"Question"}}];let _n=(()=>{class a{static{this.\u0275fac=function(n){return new(n||a)}}static{this.\u0275mod=t.$C({type:a})}static{this.\u0275inj=t.G2t({imports:[O.iI.forChild(gn),O.iI]})}}return a})();var mt=p(9892),fn=p(3902),vn=p(6924),M=(p(4085),p(8617),p(1413),p(7786),p(6697),p(6977),p(9172),p(5558),p(7336));p(8203);const Q=new t.nKC("mat-chips-default-options");let yt=(()=>{class a{static{this.\u0275fac=function(n){return new(n||a)}}static{this.\u0275mod=t.$C({type:a})}static{this.\u0275inj=t.G2t({providers:[f.es,{provide:Q,useValue:{separatorKeyCodes:[M.Fm]}}],imports:[f.yE,h.MD,f.pZ,f.yE]})}}return a})(),Hn=(()=>{class a{static{this.\u0275fac=function(n){return new(n||a)}}static{this.\u0275mod=t.$C({type:a})}static{this.\u0275inj=t.G2t({imports:[h.MD,mt.G,I.tP,H.Ou,s.hM,B.w,m.RG,l.X1,fn.Fg,x.fS,y.m_,vn.YF,g.Hl,yt,R.Hu]})}}return a})();var Kn=p(9946),Wn=p(858),Zn=p(2765);let ta=(()=>{class a{static{this.\u0275fac=function(n){return new(n||a)}}static{this.\u0275mod=t.$C({type:a})}static{this.\u0275inj=t.G2t({providers:[k.m],imports:[h.MD,_n,mt.G,Zn.g7,v.Cn,l.YN,l.X1,Kn.Y,Wn.H,yt,Hn]})}}return a})()}}]);